{"version":3,"sources":["./src/addons/mod/workshop/pages/assessment/assessment.html","./src/addons/mod/workshop/pages/edit-submission/edit-submission.html","./src/addons/mod/workshop/pages/index/index.html","./src/addons/mod/workshop/pages/assessment/assessment.ts","./src/addons/mod/workshop/pages/edit-submission/edit-submission.ts","./src/addons/mod/workshop/pages/index/index.ts","./src/addons/mod/workshop/workshop-lazy.module.ts"],"names":[],"mappings":"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","file":"workshop-lazy-module.js","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <h1>\\r\\n            <core-format-text [text]=\\\"title\\\" contextLevel=\\\"module\\\" [contextInstanceId]=\\\"workshop && workshop.coursemodule\\\"\\r\\n                [courseId]=\\\"courseId\\\">\\r\\n            </core-format-text>\\r\\n        </h1>\\r\\n        <ion-buttons slot=\\\"end\\\" [hidden]=\\\"!evaluating\\\">\\r\\n            <ion-button fill=\\\"clear\\\" (click)=\\\"saveEvaluation()\\\">\\r\\n                {{ 'core.save' | translate }}\\r\\n            </ion-button>\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <ion-refresher slot=\\\"fixed\\\" [disabled]=\\\"!loaded\\\" (ionRefresh)=\\\"refreshAssessment($event.target)\\\" *ngIf=\\\"!evaluating\\\">\\r\\n        <ion-refresher-content pullingText=\\\"{{ 'core.pulltorefresh' | translate }}\\\"></ion-refresher-content>\\r\\n    </ion-refresher>\\r\\n    <core-loading [hideUntil]=\\\"loaded\\\">\\r\\n\\r\\n        <ion-item class=\\\"ion-text-wrap\\\">\\r\\n            <core-user-avatar *ngIf=\\\"profile\\\" [user]=\\\"profile\\\" slot=\\\"start\\\" [courseId]=\\\"courseId\\\" [userId]=\\\"profile.id\\\">\\r\\n            </core-user-avatar>\\r\\n\\r\\n            <ion-label>\\r\\n                <h2 *ngIf=\\\"profile && profile.fullname\\\">{{profile.fullname}}</h2>\\r\\n\\r\\n                <p *ngIf=\\\"workshop && assessment && showGrade(assessment.grade)\\\">\\r\\n                    {{ 'addon.mod_workshop.submissiongradeof' | translate:{$a: workshop.grade } }}: {{assessment.grade}}\\r\\n                </p>\\r\\n                <p *ngIf=\\\"workshop && access && access.canviewallsubmissions && assessment && showGrade(assessment.gradinggrade)\\\"\\r\\n                    [class.core-has-overriden-grade]=\\\" showGrade(assessment.gradinggrade)\\\">\\r\\n                    {{ 'addon.mod_workshop.gradinggradeof' | translate:{$a: workshop.gradinggrade } }}: {{assessment.gradinggrade}}\\r\\n                </p>\\r\\n                <p *ngIf=\\\"access && access.canviewallsubmissions && assessment && showGrade(assessment.gradinggradeover)\\\"\\r\\n                    class=\\\"core-overriden-grade\\\">\\r\\n                    {{ 'addon.mod_workshop.gradinggradeover' | translate }}: {{assessment.gradinggradeover}}\\r\\n                </p>\\r\\n                <p *ngIf=\\\"assessment && assessment.weight && assessment.weight != 1\\\">\\r\\n                    {{ 'addon.mod_workshop.weightinfo' | translate:{$a: assessment.weight } }}\\r\\n                </p>\\r\\n                <ion-badge *ngIf=\\\"!assessment || !showGrade(assessment.grade)\\\" color=\\\"danger\\\">\\r\\n                    {{ 'addon.mod_workshop.notassessed' | translate }}\\r\\n                </ion-badge>\\r\\n            </ion-label>\\r\\n        </ion-item>\\r\\n\\r\\n        <addon-mod-workshop-assessment-strategy\\r\\n            *ngIf=\\\"assessment && assessmentId && showGrade(assessment.grade) && workshop && access\\\" [workshop]=\\\"workshop\\\"\\r\\n            [access]=\\\"access\\\" [assessmentId]=\\\"assessmentId\\\" [userId]=\\\"profile && profile.id\\\" [strategy]=\\\"strategy\\\">\\r\\n        </addon-mod-workshop-assessment-strategy>\\r\\n\\r\\n        <form [formGroup]=\\\"evaluateForm\\\" *ngIf=\\\"evaluating\\\" #evaluateFormEl>\\r\\n            <ion-item class=\\\"ion-text-wrap\\\">\\r\\n                <ion-label><h2>{{ 'addon.mod_workshop.assessmentsettings' | translate }}</h2></ion-label>\\r\\n            </ion-item>\\r\\n            <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"access?.canallocate\\\">\\r\\n                <ion-label position=\\\"stacked\\\">\\r\\n                    <span core-mark-required=\\\"true\\\">\\r\\n                        {{ 'addon.mod_workshop.assessmentweight' | translate }}\\r\\n                    </span>\\r\\n                </ion-label>\\r\\n                <ion-select formControlName=\\\"weight\\\" required=\\\"true\\\" interface=\\\"action-sheet\\\"\\r\\n                    [interfaceOptions]=\\\"{header: 'addon.mod_workshop.assessmentweight' | translate}\\\">\\r\\n                    <ion-select-option *ngFor=\\\"let w of weights\\\" [value]=\\\"w\\\">{{ w }}</ion-select-option>\\r\\n                </ion-select>\\r\\n            </ion-item>\\r\\n            <ion-item class=\\\"ion-text-wrap\\\">\\r\\n                <ion-label>\\r\\n                    <h2>{{ 'addon.mod_workshop.gradinggradecalculated' | translate }}</h2>\\r\\n                    <p>{{ gradingGrade }}</p>\\r\\n                </ion-label>\\r\\n            </ion-item>\\r\\n            <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"access?.canoverridegrades\\\">\\r\\n                <ion-label position=\\\"stacked\\\">{{ 'addon.mod_workshop.gradinggradeover' | translate }}</ion-label>\\r\\n                <ion-select formControlName=\\\"grade\\\" interface=\\\"action-sheet\\\"\\r\\n                    [interfaceOptions]=\\\"{header: 'addon.mod_workshop.gradinggradeover' | translate}\\\">\\r\\n                    <ion-select-option *ngFor=\\\"let grade of evaluationGrades\\\" [value]=\\\"grade.value\\\">\\r\\n                        {{grade.label}}\\r\\n                    </ion-select-option>\\r\\n                </ion-select>\\r\\n            </ion-item>\\r\\n            <ion-item *ngIf=\\\"access?.canoverridegrades\\\">\\r\\n                <ion-label position=\\\"stacked\\\">{{ 'addon.mod_workshop.feedbackreviewer' | translate }}</ion-label>\\r\\n                <core-rich-text-editor [control]=\\\"evaluateForm.controls['text']\\\" name=\\\"text\\\"\\r\\n                    [autoSave]=\\\"true\\\" contextLevel=\\\"module\\\" [contextInstanceId]=\\\"workshop?.coursemodule\\\"\\r\\n                    elementId=\\\"feedbackreviewer_editor\\\" [draftExtraParams]=\\\"{asid: assessmentId}\\\">\\r\\n                </core-rich-text-editor>\\r\\n            </ion-item>\\r\\n        </form>\\r\\n        <ion-list *ngIf=\\\"!evaluating && evaluate && evaluate.text\\\">\\r\\n            <ion-item class=\\\"ion-text-wrap\\\">\\r\\n                <core-user-avatar *ngIf=\\\"evaluateByProfile\\\" [user]=\\\"evaluateByProfile\\\" slot=\\\"start\\\"\\r\\n                    [courseId]=\\\"courseId\\\" [userId]=\\\"evaluateByProfile.id\\\"></core-user-avatar>\\r\\n                <ion-label>\\r\\n                    <h2 *ngIf=\\\"evaluateByProfile && evaluateByProfile.fullname\\\">\\r\\n                        {{ 'addon.mod_workshop.feedbackby' | translate : {$a: evaluateByProfile.fullname} }}\\r\\n                    </h2>\\r\\n                    <core-format-text [text]=\\\"evaluate.text\\\" contextLevel=\\\"module\\\" [contextInstanceId]=\\\"workshop?.coursemodule\\\"\\r\\n                        [courseId]=\\\"courseId\\\">\\r\\n                    </core-format-text>\\r\\n                </ion-label>\\r\\n            </ion-item>\\r\\n        </ion-list>\\r\\n    </core-loading>\\r\\n</ion-content>\\r\\n\";","export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <h1>{{ 'addon.mod_workshop.editsubmission' | translate }}</h1>\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n            <ion-button fill=\\\"clear\\\" (click)=\\\"save()\\\" [attr.aria-label]=\\\"'core.save' | translate\\\">\\r\\n                {{ 'core.save' | translate }}\\r\\n            </ion-button>\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <core-loading [hideUntil]=\\\"loaded\\\">\\r\\n        <form [formGroup]=\\\"editForm\\\" *ngIf=\\\"workshop\\\" #editFormEl>\\r\\n            <ion-item class=\\\"ion-text-wrap\\\">\\r\\n                <ion-label position=\\\"stacked\\\">\\r\\n                    <span core-mark-required=\\\"true\\\">\\r\\n                        {{ 'addon.mod_workshop.submissiontitle' | translate }}\\r\\n                    </span>\\r\\n                </ion-label>\\r\\n                <ion-input name=\\\"title\\\" type=\\\"text\\\" [placeholder]=\\\"'addon.mod_workshop.submissiontitle' | translate\\\"\\r\\n                    formControlName=\\\"title\\\">\\r\\n                </ion-input>\\r\\n            </ion-item>\\r\\n\\r\\n            <ion-item *ngIf=\\\"textAvailable\\\">\\r\\n                <ion-label position=\\\"stacked\\\">\\r\\n                    <span [core-mark-required]=\\\"textRequired\\\">\\r\\n                        {{ 'addon.mod_workshop.submissioncontent' | translate }}\\r\\n                    </span>\\r\\n                </ion-label>\\r\\n                <core-rich-text-editor [control]=\\\"editForm.controls['content']\\\" name=\\\"content\\\"\\r\\n                    [placeholder]=\\\"'addon.mod_workshop.submissioncontent' | translate\\\" name=\\\"content\\\" [component]=\\\"component\\\"\\r\\n                    [componentId]=\\\"componentId\\\" [autoSave]=\\\"true\\\" contextLevel=\\\"module\\\" [contextInstanceId]=\\\"module.id\\\"\\r\\n                    elementId=\\\"content_editor\\\" [draftExtraParams]=\\\"editorExtraParams\\\"></core-rich-text-editor>\\r\\n            </ion-item>\\r\\n\\r\\n            <core-attachments *ngIf=\\\"fileAvailable\\\" [files]=\\\"attachments\\\" [maxSize]=\\\"workshop.maxbytes\\\"\\r\\n                [maxSubmissions]=\\\"workshop.nattachments\\\" [component]=\\\"component\\\" [componentId]=\\\"workshop.coursemodule\\\"\\r\\n                allowOffline=\\\"true\\\" [acceptedTypes]=\\\"workshop.submissionfiletypes\\\" [required]=\\\"fileRequired\\\"\\r\\n                [courseId]=\\\"workshop.course\\\">\\r\\n            </core-attachments>\\r\\n        </form>\\r\\n    </core-loading>\\r\\n</ion-content>\\r\\n\";","export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <h1>\\r\\n            <core-format-text [text]=\\\"title\\\" contextLevel=\\\"module\\\" [contextInstanceId]=\\\"module.id\\\" [courseId]=\\\"courseId\\\">\\r\\n            </core-format-text>\\r\\n        </h1>\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n            <!-- The buttons defined by the component will be added in here. -->\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <ion-refresher slot=\\\"fixed\\\" [disabled]=\\\"!activityComponent?.loaded\\\" (ionRefresh)=\\\"activityComponent?.doRefresh($event.target)\\\">\\r\\n        <ion-refresher-content pullingText=\\\"{{ 'core.pulltorefresh' | translate }}\\\"></ion-refresher-content>\\r\\n    </ion-refresher>\\r\\n\\r\\n    <addon-mod-workshop-index [module]=\\\"module\\\" [courseId]=\\\"courseId\\\" [group]=\\\"selectedGroup\\\" (dataRetrieved)=\\\"updateData($event)\\\">\\r\\n    </addon-mod-workshop-index>\\r\\n</ion-content>\\r\\n\";","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, OnInit, OnDestroy, ViewChild, ElementRef } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { CoreCourse } from '@features/course/services/course';\r\nimport { CoreGradesHelper, CoreGradesMenuItem } from '@features/grades/services/grades-helper';\r\nimport { CoreUser, CoreUserProfile } from '@features/user/services/user';\r\nimport { CanLeave } from '@guards/can-leave';\r\nimport { IonRefresher } from '@ionic/angular';\r\nimport { CoreNavigator } from '@services/navigator';\r\nimport { CoreSites } from '@services/sites';\r\nimport { CoreSync } from '@services/sync';\r\nimport { CoreDomUtils } from '@services/utils/dom';\r\nimport { CoreTextUtils } from '@services/utils/text';\r\nimport { Translate } from '@singletons';\r\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\r\nimport { CoreForms } from '@singletons/form';\r\nimport {\r\n    AddonModWorkshop,\r\n    AddonModWorkshopAssessmentSavedChangedEventData,\r\n    AddonModWorkshopData,\r\n    AddonModWorkshopGetWorkshopAccessInformationWSResponse,\r\n    AddonModWorkshopPhase,\r\n    AddonModWorkshopProvider,\r\n    AddonModWorkshopSubmissionData,\r\n} from '../../services/workshop';\r\nimport { AddonModWorkshopHelper, AddonModWorkshopSubmissionAssessmentWithFormData } from '../../services/workshop-helper';\r\nimport { AddonModWorkshopOffline } from '../../services/workshop-offline';\r\nimport { AddonModWorkshopSyncProvider } from '../../services/workshop-sync';\r\n\r\n/**\r\n * Page that displays a workshop assessment.\r\n */\r\n@Component({\r\n    selector: 'page-addon-mod-workshop-assessment-page',\r\n    templateUrl: 'assessment.html',\r\n})\r\nexport class AddonModWorkshopAssessmentPage implements OnInit, OnDestroy, CanLeave {\r\n\r\n    @ViewChild('evaluateFormEl') formElement!: ElementRef;\r\n\r\n    assessment!: AddonModWorkshopSubmissionAssessmentWithFormData;\r\n    submission!: AddonModWorkshopSubmissionData;\r\n    profile!: CoreUserProfile;\r\n    courseId!: number;\r\n    access?: AddonModWorkshopGetWorkshopAccessInformationWSResponse;\r\n    assessmentId!: number;\r\n    evaluating = false;\r\n    loaded = false;\r\n    showGrade: (grade?: string | number) => boolean;\r\n    evaluateForm: FormGroup;\r\n    maxGrade?: number;\r\n    workshop?: AddonModWorkshopData;\r\n    strategy?: string;\r\n    title = '';\r\n    evaluate: AddonModWorkshopAssessmentEvaluation = {\r\n        text: '',\r\n        grade: -1,\r\n        weight: 1,\r\n    };\r\n\r\n    weights: number[] = [];\r\n    evaluateByProfile?: CoreUserProfile;\r\n    evaluationGrades: CoreGradesMenuItem[] = [];\r\n    gradingGrade?: string | number;\r\n\r\n    protected workshopId!: number;\r\n    protected originalEvaluation: AddonModWorkshopAssessmentEvaluation = {\r\n        text: '',\r\n        grade: -1,\r\n        weight: 1,\r\n    };\r\n\r\n    protected hasOffline = false;\r\n    protected syncObserver: CoreEventObserver;\r\n    protected isDestroyed = false;\r\n    protected siteId: string;\r\n    protected currentUserId: number;\r\n    protected forceLeave = false;\r\n\r\n    constructor(\r\n        protected fb: FormBuilder,\r\n    ) {\r\n        this.siteId = CoreSites.getCurrentSiteId();\r\n        this.currentUserId = CoreSites.getCurrentSiteUserId();\r\n\r\n        this.showGrade = AddonModWorkshopHelper.showGrade;\r\n\r\n        this.evaluateForm = new FormGroup({});\r\n        this.evaluateForm.addControl('weight', this.fb.control('', Validators.required));\r\n        this.evaluateForm.addControl('grade', this.fb.control(''));\r\n        this.evaluateForm.addControl('text', this.fb.control(''));\r\n\r\n        // Refresh workshop on sync.\r\n        this.syncObserver = CoreEvents.on(AddonModWorkshopSyncProvider.AUTO_SYNCED, (data) => {\r\n            // Update just when all database is synced.\r\n            if (this.workshopId === data.workshopId) {\r\n                this.loaded = false;\r\n                this.refreshAllData();\r\n            }\r\n        }, this.siteId);\r\n    }\r\n\r\n    /**\r\n     * Component being initialized.\r\n     */\r\n    ngOnInit(): void {\r\n        this.assessment = CoreNavigator.getRouteParam<AddonModWorkshopSubmissionAssessmentWithFormData>('assessment')!;\r\n        this.submission = CoreNavigator.getRouteParam<AddonModWorkshopSubmissionData>('submission')!;\r\n        this.profile = CoreNavigator.getRouteParam<CoreUserProfile>('profile')!;\r\n        this.courseId = CoreNavigator.getRouteNumberParam('courseId')!;\r\n\r\n        this.assessmentId = this.assessment.id;\r\n        this.workshopId = this.submission.workshopid;\r\n\r\n        this.fetchAssessmentData();\r\n    }\r\n\r\n    /**\r\n     * Check if we can leave the page or not.\r\n     *\r\n     * @return Resolved if we can leave it, rejected if not.\r\n     */\r\n    async canLeave(): Promise<boolean> {\r\n        if (this.forceLeave || !this.evaluating) {\r\n            return true;\r\n        }\r\n\r\n        if (!this.hasEvaluationChanged()) {\r\n            return true;\r\n        }\r\n\r\n        // Show confirmation if some data has been modified.\r\n        await CoreDomUtils.showConfirm(Translate.instant('core.confirmcanceledit'));\r\n\r\n        CoreForms.triggerFormCancelledEvent(this.formElement, this.siteId);\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Fetch the assessment data.\r\n     *\r\n     * @return Resolved when done.\r\n     */\r\n    protected async fetchAssessmentData(): Promise<void> {\r\n        try {\r\n            this.workshop = await AddonModWorkshop.getWorkshopById(this.courseId, this.workshopId);\r\n            this.title = this.workshop.name;\r\n            this.strategy = this.workshop.strategy;\r\n\r\n            const gradeInfo = await CoreCourse.getModuleBasicGradeInfo(this.workshop.coursemodule);\r\n            this.maxGrade = gradeInfo?.grade;\r\n\r\n            this.access = await AddonModWorkshop.getWorkshopAccessInformation(\r\n                this.workshopId,\r\n                { cmId: this.workshop.coursemodule },\r\n            );\r\n\r\n            // Load Weights selector.\r\n            if (this.assessmentId && (this.access.canallocate || this.access.canoverridegrades)) {\r\n                if (!this.isDestroyed) {\r\n                    // Block the workshop.\r\n                    CoreSync.blockOperation(AddonModWorkshopProvider.COMPONENT, this.workshopId);\r\n                }\r\n\r\n                this.evaluating = true;\r\n            } else {\r\n                this.evaluating = false;\r\n            }\r\n\r\n            if (!this.evaluating && this.workshop.phase != AddonModWorkshopPhase.PHASE_CLOSED) {\r\n                return;\r\n            }\r\n\r\n            // Get all info of the assessment.\r\n            const assessment = await AddonModWorkshopHelper.getReviewerAssessmentById(this.workshopId, this.assessmentId, {\r\n                userId: this.profile && this.profile.id,\r\n                cmId: this.workshop.coursemodule,\r\n            });\r\n\r\n            this.assessment = AddonModWorkshopHelper.realGradeValue(this.workshop, assessment);\r\n            this.evaluate.text = this.assessment.feedbackreviewer || '';\r\n            this.evaluate.weight = this.assessment.weight;\r\n            this.gradingGrade = this.assessment.gradinggrade ?? '-';\r\n\r\n            if (this.evaluating) {\r\n                if (this.access.canallocate) {\r\n                    this.weights = [];\r\n                    for (let i = 16; i >= 0; i--) {\r\n                        this.weights[i] = i;\r\n                    }\r\n                }\r\n\r\n                if (this.access.canoverridegrades) {\r\n                    const defaultGrade = Translate.instant('addon.mod_workshop.notoverridden');\r\n                    this.evaluationGrades =\r\n                        await CoreGradesHelper.makeGradesMenu(this.workshop.gradinggrade, undefined, defaultGrade, -1);\r\n                }\r\n\r\n                try {\r\n                    const offlineAssess = await AddonModWorkshopOffline.getEvaluateAssessment(this.workshopId, this.assessmentId);\r\n                    this.hasOffline = true;\r\n                    this.evaluate.weight = offlineAssess.weight;\r\n                    if (this.access.canoverridegrades) {\r\n                        this.evaluate.text = offlineAssess.feedbacktext || '';\r\n                        this.evaluate.grade = parseInt(offlineAssess.gradinggradeover, 10) || -1;\r\n                    }\r\n                } catch {\r\n                    this.hasOffline = false;\r\n                    // No offline, load online.\r\n                    if (this.access.canoverridegrades) {\r\n                        this.evaluate.text = this.assessment.feedbackreviewer || '';\r\n                        this.evaluate.grade = parseInt(String(this.assessment.gradinggradeover), 10) || -1;\r\n                    }\r\n                } finally {\r\n                    this.originalEvaluation.weight = this.evaluate.weight;\r\n                    if (this.access.canoverridegrades) {\r\n                        this.originalEvaluation.text = this.evaluate.text;\r\n                        this.originalEvaluation.grade = this.evaluate.grade;\r\n                    }\r\n\r\n                    this.evaluateForm.controls['weight'].setValue(this.evaluate.weight);\r\n                    if (this.access.canoverridegrades) {\r\n                        this.evaluateForm.controls['grade'].setValue(this.evaluate.grade);\r\n                        this.evaluateForm.controls['text'].setValue(this.evaluate.text);\r\n                    }\r\n                }\r\n\r\n            } else if (this.workshop.phase == AddonModWorkshopPhase.PHASE_CLOSED && this.assessment.gradinggradeoverby) {\r\n                this.evaluateByProfile = await CoreUser.getProfile(this.assessment.gradinggradeoverby, this.courseId, true);\r\n            }\r\n        } catch (error) {\r\n            CoreDomUtils.showErrorModalDefault(error, 'mm.course.errorgetmodule', true);\r\n        } finally {\r\n            this.loaded = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Force leaving the page, without checking for changes.\r\n     */\r\n    protected forceLeavePage(): void {\r\n        this.forceLeave = true;\r\n        CoreNavigator.back();\r\n    }\r\n\r\n    /**\r\n     * Check if data has changed.\r\n     *\r\n     * @return True if changed, false otherwise.\r\n     */\r\n    protected hasEvaluationChanged(): boolean {\r\n        if (!this.loaded || !this.evaluating) {\r\n            return false;\r\n        }\r\n\r\n        const inputData = this.evaluateForm.value;\r\n\r\n        if (this.originalEvaluation.weight != inputData.weight) {\r\n            return true;\r\n        }\r\n\r\n        if (this.access && this.access.canoverridegrades) {\r\n            if (this.originalEvaluation.text != inputData.text) {\r\n                return true;\r\n            }\r\n\r\n            if (this.originalEvaluation.grade != inputData.grade) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Convenience function to refresh all the data.\r\n     *\r\n     * @return Resolved when done.\r\n     */\r\n    protected async refreshAllData(): Promise<void> {\r\n        const promises: Promise<void>[] = [];\r\n\r\n        promises.push(AddonModWorkshop.invalidateWorkshopData(this.courseId));\r\n        promises.push(AddonModWorkshop.invalidateWorkshopAccessInformationData(this.workshopId));\r\n        promises.push(AddonModWorkshop.invalidateReviewerAssesmentsData(this.workshopId));\r\n\r\n        if (this.assessmentId) {\r\n            promises.push(AddonModWorkshop.invalidateAssessmentFormData(this.workshopId, this.assessmentId));\r\n            promises.push(AddonModWorkshop.invalidateAssessmentData(this.workshopId, this.assessmentId));\r\n        }\r\n\r\n        try {\r\n            await Promise.all(promises);\r\n        } finally {\r\n            CoreEvents.trigger(AddonModWorkshopProvider.ASSESSMENT_INVALIDATED, null, this.siteId);\r\n\r\n            await this.fetchAssessmentData();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Pull to refresh.\r\n     *\r\n     * @param refresher Refresher.\r\n     */\r\n    refreshAssessment(refresher: IonRefresher): void {\r\n        if (this.loaded) {\r\n            this.refreshAllData().finally(() => {\r\n                refresher?.complete();\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Save the assessment evaluation.\r\n     */\r\n    async saveEvaluation(): Promise<void> {\r\n        // Check if data has changed.\r\n        if (this.hasEvaluationChanged()) {\r\n            await this.sendEvaluation();\r\n        }\r\n\r\n        // Go back.\r\n        this.forceLeavePage();\r\n    }\r\n\r\n    /**\r\n     * Sends the evaluation to be saved on the server.\r\n     *\r\n     * @return Resolved when done.\r\n     */\r\n    protected async sendEvaluation(): Promise<void> {\r\n        const modal = await CoreDomUtils.showModalLoading('core.sending', true);\r\n        const inputData: AddonModWorkshopAssessmentEvaluation = this.evaluateForm.value;\r\n\r\n        const grade = inputData.grade >= 0 ? String(inputData.grade) : '';\r\n        // Add some HTML to the message if needed.\r\n        const text = CoreTextUtils.formatHtmlLines(inputData.text);\r\n\r\n        try {\r\n            // Try to send it to server.\r\n            const result = await AddonModWorkshop.evaluateAssessment(\r\n                this.workshopId,\r\n                this.assessmentId,\r\n                this.courseId,\r\n                text,\r\n                inputData.weight,\r\n                grade,\r\n            );\r\n\r\n            CoreForms.triggerFormSubmittedEvent(this.formElement, !!result, this.siteId);\r\n\r\n            const data: AddonModWorkshopAssessmentSavedChangedEventData = {\r\n                workshopId: this.workshopId,\r\n                assessmentId: this.assessmentId,\r\n                userId: this.currentUserId,\r\n            };\r\n\r\n            return AddonModWorkshop.invalidateAssessmentData(this.workshopId, this.assessmentId).finally(() => {\r\n                CoreEvents.trigger(AddonModWorkshopProvider.ASSESSMENT_SAVED, data, this.siteId);\r\n            });\r\n        } catch (error) {\r\n            CoreDomUtils.showErrorModalDefault(error, 'Cannot save assessment evaluation');\r\n        } finally {\r\n            modal.dismiss();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Component being destroyed.\r\n     */\r\n    ngOnDestroy(): void {\r\n        this.isDestroyed = true;\r\n\r\n        this.syncObserver?.off();\r\n        // Restore original back functions.\r\n        CoreSync.unblockOperation(AddonModWorkshopProvider.COMPONENT, this.workshopId);\r\n    }\r\n\r\n}\r\n\r\ntype AddonModWorkshopAssessmentEvaluation = {\r\n    text: string;\r\n    grade: number;\r\n    weight: number;\r\n};\r\n","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, OnInit, OnDestroy, ViewChild, ElementRef } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { CoreError } from '@classes/errors/error';\r\nimport { CoreCourseModule } from '@features/course/services/course-helper';\r\nimport { CoreFileUploader, CoreFileUploaderStoreFilesResult } from '@features/fileuploader/services/fileuploader';\r\nimport { CanLeave } from '@guards/can-leave';\r\nimport { CoreFile } from '@services/file';\r\nimport { CoreFileEntry, CoreFileHelper } from '@services/file-helper';\r\nimport { CoreNavigator } from '@services/navigator';\r\nimport { CoreSites } from '@services/sites';\r\nimport { CoreSync } from '@services/sync';\r\nimport { CoreDomUtils } from '@services/utils/dom';\r\nimport { CoreTextUtils } from '@services/utils/text';\r\nimport { Translate } from '@singletons';\r\nimport { CoreEvents } from '@singletons/events';\r\nimport { CoreForms } from '@singletons/form';\r\nimport {\r\n    AddonModWorkshopProvider,\r\n    AddonModWorkshop,\r\n    AddonModWorkshopSubmissionType,\r\n    AddonModWorkshopSubmissionChangedEventData,\r\n    AddonModWorkshopAction,\r\n    AddonModWorkshopGetWorkshopAccessInformationWSResponse,\r\n    AddonModWorkshopData,\r\n} from '../../services/workshop';\r\nimport { AddonModWorkshopHelper, AddonModWorkshopSubmissionDataWithOfflineData } from '../../services/workshop-helper';\r\nimport { AddonModWorkshopOffline } from '../../services/workshop-offline';\r\n\r\n/**\r\n * Page that displays the workshop edit submission.\r\n */\r\n@Component({\r\n    selector: 'page-addon-mod-workshop-edit-submission',\r\n    templateUrl: 'edit-submission.html',\r\n})\r\nexport class AddonModWorkshopEditSubmissionPage implements OnInit, OnDestroy, CanLeave {\r\n\r\n    @ViewChild('editFormEl') formElement!: ElementRef;\r\n\r\n    module!: CoreCourseModule;\r\n    courseId!: number;\r\n    access!: AddonModWorkshopGetWorkshopAccessInformationWSResponse;\r\n    submission?: AddonModWorkshopSubmissionDataWithOfflineData;\r\n\r\n    loaded = false;\r\n    component = AddonModWorkshopProvider.COMPONENT;\r\n    componentId!: number;\r\n    editForm: FormGroup; // The form group.\r\n    editorExtraParams: Record<string, unknown> = {}; // Extra params to identify the draft.\r\n    workshop?: AddonModWorkshopData;\r\n    textAvailable = false;\r\n    textRequired = false;\r\n    fileAvailable = false;\r\n    fileRequired = false;\r\n    attachments: CoreFileEntry[] = [];\r\n\r\n    protected workshopId!: number;\r\n    protected submissionId = 0;\r\n    protected userId: number;\r\n    protected originalData: AddonModWorkshopEditSubmissionInputData = {\r\n        title: '',\r\n        content: '',\r\n        attachmentfiles: [],\r\n    };\r\n\r\n    protected hasOffline = false;\r\n    protected editing = false;\r\n    protected forceLeave = false;\r\n    protected siteId: string;\r\n    protected isDestroyed = false;\r\n\r\n    constructor(\r\n        protected fb: FormBuilder,\r\n    ) {\r\n\r\n        this.userId = CoreSites.getCurrentSiteUserId();\r\n        this.siteId = CoreSites.getCurrentSiteId();\r\n\r\n        this.editForm = new FormGroup({});\r\n        this.editForm.addControl('title', this.fb.control('', Validators.required));\r\n        this.editForm.addControl('content', this.fb.control(''));\r\n    }\r\n\r\n    /**\r\n     * Component being initialized.\r\n     */\r\n    ngOnInit(): void {\r\n        this.module = CoreNavigator.getRouteParam<CoreCourseModule>('module')!;\r\n        this.courseId = CoreNavigator.getRouteNumberParam('courseId')!;\r\n        this.access = CoreNavigator.getRouteParam<AddonModWorkshopGetWorkshopAccessInformationWSResponse>('access')!;\r\n        this.submissionId = CoreNavigator.getRouteNumberParam('submissionId') || 0;\r\n\r\n        if (this.submissionId > 0) {\r\n            this.editorExtraParams.id = this.submissionId;\r\n        }\r\n\r\n        this.workshopId = this.module.instance!;\r\n        this.componentId = this.module.id;\r\n\r\n        if (!this.isDestroyed) {\r\n            // Block the workshop.\r\n            CoreSync.blockOperation(this.component, this.workshopId);\r\n        }\r\n\r\n        this.fetchSubmissionData();\r\n    }\r\n\r\n    /**\r\n     * Check if we can leave the page or not.\r\n     *\r\n     * @return Resolved if we can leave it, rejected if not.\r\n     */\r\n    async canLeave(): Promise<boolean> {\r\n        if (this.forceLeave) {\r\n            return true;\r\n        }\r\n\r\n        // Check if data has changed.\r\n        if (this.hasDataChanged()) {\r\n            // Show confirmation if some data has been modified.\r\n            await CoreDomUtils.showConfirm(Translate.instant('core.confirmcanceledit'));\r\n        }\r\n\r\n        if (this.submission?.attachmentfiles) {\r\n            // Delete the local files from the tmp folder.\r\n            CoreFileUploader.clearTmpFiles(this.submission.attachmentfiles);\r\n        }\r\n\r\n        CoreForms.triggerFormCancelledEvent(this.formElement, this.siteId);\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Fetch the submission data.\r\n     *\r\n     * @return Resolved when done.\r\n     */\r\n    protected async fetchSubmissionData(): Promise<void> {\r\n        try {\r\n            this.workshop = await AddonModWorkshop.getWorkshop(this.courseId, this.module.id);\r\n            this.textAvailable = (this.workshop.submissiontypetext != AddonModWorkshopSubmissionType.SUBMISSION_TYPE_DISABLED);\r\n            this.textRequired = (this.workshop.submissiontypetext == AddonModWorkshopSubmissionType.SUBMISSION_TYPE_REQUIRED);\r\n            this.fileAvailable = (this.workshop.submissiontypefile != AddonModWorkshopSubmissionType.SUBMISSION_TYPE_DISABLED);\r\n            this.fileRequired = (this.workshop.submissiontypefile == AddonModWorkshopSubmissionType.SUBMISSION_TYPE_REQUIRED);\r\n\r\n            this.editForm.controls.content.setValidators(this.textRequired ? Validators.required : null);\r\n\r\n            if (this.submissionId > 0) {\r\n                this.editing = true;\r\n\r\n                this.submission =\r\n                    await AddonModWorkshopHelper.getSubmissionById(this.workshopId, this.submissionId, { cmId: this.module.id });\r\n\r\n                const canEdit = this.userId == this.submission.authorid &&\r\n                    this.access.cansubmit &&\r\n                    this.access.modifyingsubmissionallowed;\r\n\r\n                if (!canEdit) {\r\n                    // Should not happen, but go back if does.\r\n                    this.forceLeavePage();\r\n\r\n                    return;\r\n                }\r\n            } else if (!this.access.cansubmit || !this.access.creatingsubmissionallowed) {\r\n                // Should not happen, but go back if does.\r\n                this.forceLeavePage();\r\n\r\n                return;\r\n            }\r\n\r\n            const submissionsActions = await AddonModWorkshopOffline.getSubmissions(this.workshopId);\r\n            if (submissionsActions && submissionsActions.length) {\r\n                this.hasOffline = true;\r\n                this.submission = await AddonModWorkshopHelper.applyOfflineData(this.submission, submissionsActions);\r\n            } else {\r\n                this.hasOffline = false;\r\n            }\r\n\r\n            if (this.submission) {\r\n                this.originalData.title = this.submission.title || '';\r\n                this.originalData.content = this.submission.content || '';\r\n                this.originalData.attachmentfiles = [];\r\n\r\n                (this.submission.attachmentfiles || []).forEach((file) => {\r\n                    let filename = CoreFile.getFileName(file);\r\n                    if (!filename) {\r\n                        // We don't have filename, extract it from the path.\r\n                        filename = CoreFileHelper.getFilenameFromPath(file) || '';\r\n                    }\r\n\r\n                    this.originalData.attachmentfiles.push({\r\n                        filename,\r\n                        fileurl: 'fileurl' in file ? file.fileurl : '',\r\n                    });\r\n                });\r\n\r\n                this.editForm.controls['title'].setValue(this.submission.title);\r\n                this.editForm.controls['content'].setValue(this.submission.content);\r\n                this.attachments = this.submission.attachmentfiles || [];\r\n            }\r\n\r\n            this.loaded = true;\r\n        } catch (error) {\r\n            this.loaded = false;\r\n\r\n            CoreDomUtils.showErrorModalDefault(error, 'core.course.errorgetmodule', true);\r\n\r\n            this.forceLeavePage();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Force leaving the page, without checking for changes.\r\n     */\r\n    protected forceLeavePage(): void {\r\n        this.forceLeave = true;\r\n        CoreNavigator.back();\r\n    }\r\n\r\n    /**\r\n     * Get the form input data.\r\n     *\r\n     * @return Object with all the info.\r\n     */\r\n    protected getInputData(): AddonModWorkshopEditSubmissionInputData {\r\n        const values: AddonModWorkshopEditSubmissionInputData = {\r\n            title: this.editForm.value.title,\r\n            content: '',\r\n            attachmentfiles: [],\r\n        };\r\n\r\n        if (this.textAvailable) {\r\n            values.content = this.editForm.value.content || '';\r\n        }\r\n\r\n        if (this.fileAvailable) {\r\n            values.attachmentfiles = this.attachments;\r\n        }\r\n\r\n        return values;\r\n    }\r\n\r\n    /**\r\n     * Check if data has changed.\r\n     *\r\n     * @return True if changed or false if not.\r\n     */\r\n    protected hasDataChanged(): boolean {\r\n        if (!this.loaded) {\r\n            return false;\r\n        }\r\n\r\n        const inputData = this.getInputData();\r\n        if (this.originalData.title != inputData.title || this.textAvailable && this.originalData.content != inputData.content) {\r\n            return true;\r\n        }\r\n\r\n        if (this.fileAvailable) {\r\n            return CoreFileUploader.areFileListDifferent(inputData.attachmentfiles, this.originalData.attachmentfiles);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Save the submission.\r\n     */\r\n    async save(): Promise<void> {\r\n        // Check if data has changed.\r\n        if (this.hasDataChanged()) {\r\n            try {\r\n                await this.saveSubmission();\r\n                // Go back to entry list.\r\n                this.forceLeavePage();\r\n            } catch{\r\n                // Nothing to do.\r\n            }\r\n        } else {\r\n            // Nothing to save, just go back.\r\n            this.forceLeavePage();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Send submission and save.\r\n     *\r\n     * @return Resolved when done.\r\n     */\r\n    protected async saveSubmission(): Promise<void> {\r\n        const inputData = this.getInputData();\r\n\r\n        if (!inputData.title) {\r\n            CoreDomUtils.showAlertTranslated('core.notice', 'addon.mod_workshop.submissionrequiredtitle');\r\n\r\n            throw new CoreError(Translate.instant('addon.mod_workshop.submissionrequiredtitle'));\r\n        }\r\n\r\n        const noText = CoreTextUtils.htmlIsBlank(inputData.content);\r\n        const noFiles = !inputData.attachmentfiles.length;\r\n\r\n        if ((this.textRequired && noText) || (this.fileRequired && noFiles) || (noText && noFiles)) {\r\n            CoreDomUtils.showAlertTranslated('core.notice', 'addon.mod_workshop.submissionrequiredcontent');\r\n\r\n            throw new CoreError(Translate.instant('addon.mod_workshop.submissionrequiredcontent'));\r\n        }\r\n\r\n        let saveOffline = false;\r\n\r\n        const modal = await CoreDomUtils.showModalLoading('core.sending', true);\r\n        const submissionId = this.submission?.id;\r\n\r\n        // Add some HTML to the message if needed.\r\n        if (this.textAvailable) {\r\n            inputData.content = CoreTextUtils.formatHtmlLines(inputData.content);\r\n        }\r\n\r\n        // Upload attachments first if any.\r\n        let allowOffline = !inputData.attachmentfiles.length;\r\n        try {\r\n            let attachmentsId: number | undefined;\r\n            let storeFilesResult: CoreFileUploaderStoreFilesResult | undefined;\r\n\r\n            try {\r\n                attachmentsId = await AddonModWorkshopHelper.uploadOrStoreSubmissionFiles(\r\n                    this.workshopId,\r\n                    inputData.attachmentfiles,\r\n                    false,\r\n                );\r\n            } catch {\r\n                // Cannot upload them in online, save them in offline.\r\n                saveOffline = true;\r\n                allowOffline = true;\r\n\r\n                storeFilesResult = await AddonModWorkshopHelper.uploadOrStoreSubmissionFiles(\r\n                    this.workshopId,\r\n                    inputData.attachmentfiles,\r\n                    true,\r\n                );\r\n            }\r\n\r\n            if (!saveOffline && !this.fileAvailable) {\r\n                attachmentsId = undefined;\r\n            }\r\n\r\n            let newSubmissionId: number | false;\r\n            if (this.editing) {\r\n                if (saveOffline) {\r\n                    // Save submission in offline.\r\n                    await AddonModWorkshopOffline.saveSubmission(\r\n                        this.workshopId,\r\n                        this.courseId,\r\n                        inputData.title,\r\n                        inputData.content,\r\n                        storeFilesResult,\r\n                        submissionId,\r\n                        AddonModWorkshopAction.UPDATE,\r\n                    );\r\n                    newSubmissionId = false;\r\n                } else {\r\n                    // Try to send it to server.\r\n                    // Don't allow offline if there are attachments since they were uploaded fine.\r\n                    newSubmissionId = await AddonModWorkshop.updateSubmission(\r\n                        this.workshopId,\r\n                        submissionId!,\r\n                        this.courseId,\r\n                        inputData.title,\r\n                        inputData.content,\r\n                        attachmentsId,\r\n                        undefined,\r\n                        allowOffline,\r\n                    );\r\n                }\r\n            } else {\r\n                if (saveOffline) {\r\n                    // Save submission in offline.\r\n                    await AddonModWorkshopOffline.saveSubmission(\r\n                        this.workshopId,\r\n                        this.courseId,\r\n                        inputData.title,\r\n                        inputData.content,\r\n                        storeFilesResult,\r\n                        undefined,\r\n                        AddonModWorkshopAction.ADD,\r\n                    );\r\n                    newSubmissionId = false;\r\n                } else {\r\n                    // Try to send it to server.\r\n                    // Don't allow offline if there are attachments since they were uploaded fine.\r\n                    newSubmissionId = await AddonModWorkshop.addSubmission(\r\n                        this.workshopId,\r\n                        this.courseId,\r\n                        inputData.title,\r\n                        inputData.content,\r\n                        attachmentsId,\r\n                        undefined,\r\n                        allowOffline,\r\n                    );\r\n                }\r\n            }\r\n\r\n            CoreForms.triggerFormSubmittedEvent(this.formElement, !!newSubmissionId, this.siteId);\r\n\r\n            const data: AddonModWorkshopSubmissionChangedEventData = {\r\n                workshopId: this.workshopId,\r\n            };\r\n\r\n            if (newSubmissionId) {\r\n                // Data sent to server, delete stored files (if any).\r\n                AddonModWorkshopOffline.deleteSubmissionAction(\r\n                    this.workshopId,\r\n                    this.editing ? AddonModWorkshopAction.UPDATE : AddonModWorkshopAction.ADD,\r\n                );\r\n\r\n                AddonModWorkshopHelper.deleteSubmissionStoredFiles(this.workshopId, this.siteId);\r\n                data.submissionId = newSubmissionId;\r\n            }\r\n\r\n            CoreEvents.trigger(CoreEvents.ACTIVITY_DATA_SENT, { module: 'workshop' });\r\n\r\n            const promise = newSubmissionId ? AddonModWorkshop.invalidateSubmissionData(this.workshopId, newSubmissionId) :\r\n                Promise.resolve();\r\n\r\n            await promise.finally(() => {\r\n                CoreEvents.trigger(AddonModWorkshopProvider.SUBMISSION_CHANGED, data, this.siteId);\r\n\r\n                // Delete the local files from the tmp folder.\r\n                CoreFileUploader.clearTmpFiles(inputData.attachmentfiles);\r\n            });\r\n        } catch (error) {\r\n            CoreDomUtils.showErrorModalDefault(error, 'Cannot save submission');\r\n        } finally {\r\n            modal.dismiss();\r\n        }\r\n    }\r\n\r\n    protected getFilesComponentId(): string {\r\n        const id = this.submissionId > 0\r\n            ? this.submissionId\r\n            : 'newsub';\r\n\r\n        return this.workshopId + '_' + id;\r\n    }\r\n\r\n    /**\r\n     * Component being destroyed.\r\n     */\r\n    ngOnDestroy(): void {\r\n        this.isDestroyed = true;\r\n        CoreSync.unblockOperation(this.component, this.workshopId);\r\n    }\r\n\r\n}\r\n\r\ntype AddonModWorkshopEditSubmissionInputData = {\r\n    title: string;\r\n    content: string;\r\n    attachmentfiles: CoreFileEntry[];\r\n};\r\n","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { CoreCourseModuleMainActivityPage } from '@features/course/classes/main-activity-page';\r\nimport { CoreNavigator } from '@services/navigator';\r\nimport { AddonModWorkshopIndexComponent } from '../../components/index/index';\r\n\r\n/**\r\n * Page that displays a workshop.\r\n */\r\n@Component({\r\n    selector: 'page-addon-mod-workshop-index',\r\n    templateUrl: 'index.html',\r\n})\r\nexport class AddonModWorkshopIndexPage extends CoreCourseModuleMainActivityPage<AddonModWorkshopIndexComponent> implements OnInit {\r\n\r\n    @ViewChild(AddonModWorkshopIndexComponent) activityComponent?: AddonModWorkshopIndexComponent;\r\n\r\n    selectedGroup = 0;\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.selectedGroup = CoreNavigator.getRouteNumberParam('group') || 0;\r\n    }\r\n\r\n}\r\n","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CanLeaveGuard } from '@guards/can-leave';\r\n\r\nimport { CoreSharedModule } from '@/core/shared.module';\r\nimport { AddonModWorkshopIndexPage } from './pages/index/index';\r\nimport { AddonModWorkshopComponentsModule } from './components/components.module';\r\nimport { AddonModWorkshopSubmissionPage } from './pages/submission/submission';\r\nimport { CoreEditorComponentsModule } from '@features/editor/components/components.module';\r\nimport { AddonModWorkshopAssessmentPage } from './pages/assessment/assessment';\r\nimport { AddonModWorkshopEditSubmissionPage } from './pages/edit-submission/edit-submission';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: ':courseId/:cmId',\r\n        component: AddonModWorkshopIndexPage,\r\n    },\r\n    {\r\n        path: ':courseId/:cmId/:submissionId',\r\n        component: AddonModWorkshopSubmissionPage,\r\n        canDeactivate: [CanLeaveGuard],\r\n    },\r\n    {\r\n        path: ':courseId/:cmId/:submissionId/edit',\r\n        component: AddonModWorkshopEditSubmissionPage,\r\n        canDeactivate: [CanLeaveGuard],\r\n    },\r\n    {\r\n        path: ':courseId/:cmId/:submissionId/:assessmentId',\r\n        component: AddonModWorkshopAssessmentPage,\r\n        canDeactivate: [CanLeaveGuard],\r\n    },\r\n];\r\n\r\n@NgModule({\r\n    imports: [\r\n        RouterModule.forChild(routes),\r\n        CoreSharedModule,\r\n        AddonModWorkshopComponentsModule,\r\n        CoreEditorComponentsModule,\r\n    ],\r\n    declarations: [\r\n        AddonModWorkshopIndexPage,\r\n        AddonModWorkshopSubmissionPage,\r\n        AddonModWorkshopAssessmentPage,\r\n        AddonModWorkshopEditSubmissionPage,\r\n    ],\r\n})\r\nexport class AddonModWorkshopLazyModule {}\r\n"],"sourceRoot":"webpack:///"}