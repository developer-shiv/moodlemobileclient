{"version":3,"sources":["./src/addons/calendar/pages/day/day.html","./src/addons/calendar/pages/day/day.module.ts","./src/addons/calendar/pages/day/day.page.ts","./src/addons/calendar/pages/day/day.scss"],"names":[],"mappings":"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","file":"addons-calendar-pages-day-day-module.js","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <h1>{{ 'addon.calendar.calendarevents' | translate }}</h1>\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n            <ion-button fill=\\\"clear\\\" (click)=\\\"openFilter($event)\\\" [attr.aria-label]=\\\"'core.filter' | translate\\\">\\r\\n                <ion-icon slot=\\\"icon-only\\\" name=\\\"fas-filter\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n            </ion-button>\\r\\n            <core-context-menu>\\r\\n                <core-context-menu-item *ngIf=\\\"!isCurrentDay\\\" [priority]=\\\"900\\\" [content]=\\\"'addon.calendar.today' | translate\\\"\\r\\n                    iconAction=\\\"fas-calendar-day\\\" (action)=\\\"goToCurrentDay()\\\">\\r\\n                </core-context-menu-item>\\r\\n                <core-context-menu-item [hidden]=\\\"!loaded || !hasOffline || !isOnline\\\" [priority]=\\\"400\\\"\\r\\n                    [content]=\\\"'core.settings.synchronizenow' | translate\\\" (action)=\\\"doRefresh(undefined, $event)\\\"\\r\\n                    [iconAction]=\\\"syncIcon\\\" [closeOnClick]=\\\"false\\\">\\r\\n                </core-context-menu-item>\\r\\n            </core-context-menu>\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <ion-refresher slot=\\\"fixed\\\" [disabled]=\\\"!loaded\\\" (ionRefresh)=\\\"doRefresh($event.target)\\\">\\r\\n        <ion-refresher-content pullingText=\\\"{{ 'core.pulltorefresh' | translate }}\\\"></ion-refresher-content>\\r\\n    </ion-refresher>\\r\\n\\r\\n    <!-- Period name and arrows to navigate. -->\\r\\n    <ion-grid class=\\\"ion-no-padding safe-area-page\\\">\\r\\n        <ion-row class=\\\"ion-align-items-center\\\">\\r\\n            <ion-col class=\\\"ion-text-start\\\" *ngIf=\\\"currentMoment\\\">\\r\\n                <ion-button fill=\\\"clear\\\" (click)=\\\"loadPrevious()\\\" [attr.aria-label]=\\\"'addon.calendar.dayprev' | translate\\\">\\r\\n                    <ion-icon name=\\\"fas-chevron-left\\\" slot=\\\"icon-only\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                </ion-button>\\r\\n            </ion-col>\\r\\n            <ion-col class=\\\"ion-text-center addon-calendar-period\\\">\\r\\n                <h3>{{ periodName }}</h3>\\r\\n            </ion-col>\\r\\n            <ion-col class=\\\"ion-text-end\\\" *ngIf=\\\"currentMoment\\\">\\r\\n                <ion-button fill=\\\"clear\\\" (click)=\\\"loadNext()\\\" [attr.aria-label]=\\\"'addon.calendar.daynext' | translate\\\">\\r\\n                    <ion-icon name=\\\"fas-chevron-right\\\" slot=\\\"icon-only\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                </ion-button>\\r\\n            </ion-col>\\r\\n        </ion-row>\\r\\n    </ion-grid>\\r\\n\\r\\n    <core-loading [hideUntil]=\\\"loaded\\\" class=\\\"safe-area-page\\\">\\r\\n        <!-- There is data to be synchronized -->\\r\\n        <ion-card class=\\\"core-warning-card\\\" *ngIf=\\\"hasOffline\\\">\\r\\n            <ion-item>\\r\\n                <ion-icon name=\\\"fas-exclamation-triangle\\\" slot=\\\"start\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                <ion-label>{{ 'core.hasdatatosync' | translate:{$a: 'core.day' | translate} }}</ion-label>\\r\\n            </ion-item>\\r\\n        </ion-card>\\r\\n\\r\\n        <core-empty-box *ngIf=\\\"!filteredEvents || !filteredEvents.length\\\" icon=\\\"fas-calendar\\\" inline=\\\"true\\\"\\r\\n            [message]=\\\"'addon.calendar.noevents' | translate\\\">\\r\\n        </core-empty-box>\\r\\n\\r\\n        <ion-list *ngIf=\\\"filteredEvents && filteredEvents.length\\\" class=\\\"ion-no-margin\\\">\\r\\n            <ng-container *ngFor=\\\"let event of filteredEvents\\\">\\r\\n                <ion-item class=\\\"addon-calendar-event ion-text-wrap\\\" [attr.aria-label]=\\\"event.name\\\" (click)=\\\"gotoEvent(event.id)\\\"\\r\\n                [class.item-dimmed]=\\\"event.ispast\\\" [ngClass]=\\\"['addon-calendar-eventtype-'+event.eventtype]\\\" button detail=\\\"true\\\">\\r\\n                    <img *ngIf=\\\"event.moduleIcon\\\" src=\\\"{{event.moduleIcon}}\\\" slot=\\\"start\\\" class=\\\"core-module-icon\\\" alt=\\\"\\\"\\r\\n                        role=\\\"presentation\\\">\\r\\n                    <ion-icon *ngIf=\\\"event.eventIcon && !event.moduleIcon\\\" [name]=\\\"event.eventIcon\\\" slot=\\\"start\\\" aria-hidden=\\\"true\\\">\\r\\n                    </ion-icon>\\r\\n                    <ion-label>\\r\\n                        <!-- Add the icon title so accessibility tools read it. -->\\r\\n                        <span class=\\\"sr-only\\\">\\r\\n                            {{ 'addon.calendar.type' + event.formattedType | translate }}\\r\\n                            <span class=\\\"sr-only\\\" *ngIf=\\\"event.moduleIcon && event.iconTitle\\\">{{ event.iconTitle }}</span>\\r\\n                        </span>\\r\\n                        <p class=\\\"item-heading\\\">\\r\\n                            <core-format-text [text]=\\\"event.name\\\" [contextLevel]=\\\"event.contextLevel\\\"\\r\\n                            [contextInstanceId]=\\\"event.contextInstanceId\\\"></core-format-text>\\r\\n                        </p>\\r\\n                        <p [innerHTML]=\\\"event.formattedtime\\\"></p>\\r\\n                    </ion-label>\\r\\n                    <ion-note *ngIf=\\\"event.offline && !event.deleted\\\" slot=\\\"end\\\">\\r\\n                        <ion-icon name=\\\"fas-clock\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                        <span class=\\\"ion-text-wrap\\\">{{ 'core.notsent' | translate }}</span>\\r\\n                    </ion-note>\\r\\n                    <ion-note *ngIf=\\\"event.deleted\\\" slot=\\\"end\\\">\\r\\n                        <ion-icon name=\\\"fas-trash\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                        <span class=\\\"ion-text-wrap\\\">{{ 'core.deletedoffline' | translate }}</span>\\r\\n                    </ion-note>\\r\\n                </ion-item>\\r\\n            </ng-container>\\r\\n        </ion-list>\\r\\n    </core-loading>\\r\\n\\r\\n    <!-- Create a calendar event. -->\\r\\n    <ion-fab slot=\\\"fixed\\\" core-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" *ngIf=\\\"canCreate && loaded\\\">\\r\\n        <ion-fab-button (click)=\\\"openEdit()\\\" [attr.aria-label]=\\\"'addon.calendar.newevent' | translate\\\">\\r\\n            <ion-icon name=\\\"fas-plus\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n            <span class=\\\"sr-only\\\">{{ 'addon.calendar.newevent' | translate }}</span>\\r\\n        </ion-fab-button>\\r\\n    </ion-fab>\\r\\n</ion-content>\\r\\n\";","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { CoreSharedModule } from '@/core/shared.module';\r\nimport { AddonCalendarComponentsModule } from '../../components/components.module';\r\n\r\nimport { AddonCalendarDayPage } from './day.page';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: AddonCalendarDayPage,\r\n    },\r\n];\r\n\r\n@NgModule({\r\n    imports: [\r\n        RouterModule.forChild(routes),\r\n        CoreSharedModule,\r\n        AddonCalendarComponentsModule,\r\n    ],\r\n    declarations: [\r\n        AddonCalendarDayPage,\r\n    ],\r\n    exports: [RouterModule],\r\n})\r\nexport class AddonCalendarDayPageModule {}\r\n","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { IonRefresher } from '@ionic/angular';\r\nimport { CoreApp } from '@services/app';\r\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\r\nimport { CoreLocalNotifications } from '@services/local-notifications';\r\nimport { CoreSites } from '@services/sites';\r\nimport { CoreDomUtils } from '@services/utils/dom';\r\nimport { CoreTimeUtils } from '@services/utils/time';\r\nimport {\r\n    AddonCalendarProvider,\r\n    AddonCalendar,\r\n    AddonCalendarEventToDisplay,\r\n    AddonCalendarCalendarDay,\r\n    AddonCalendarEventType,\r\n} from '../../services/calendar';\r\nimport { AddonCalendarOffline } from '../../services/calendar-offline';\r\nimport { AddonCalendarFilter, AddonCalendarHelper } from '../../services/calendar-helper';\r\nimport { AddonCalendarSync, AddonCalendarSyncProvider } from '../../services/calendar-sync';\r\nimport { CoreCategoryData, CoreCourses, CoreEnrolledCourseData } from '@features/courses/services/courses';\r\nimport { CoreCoursesHelper } from '@features/courses/services/courses-helper';\r\nimport { AddonCalendarFilterPopoverComponent } from '../../components/filter/filter';\r\nimport moment from 'moment';\r\nimport { Network, NgZone } from '@singletons';\r\nimport { CoreNavigator } from '@services/navigator';\r\nimport { Params } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { CoreUtils } from '@services/utils/utils';\r\nimport { CoreConstants } from '@/core/constants';\r\n\r\n/**\r\n * Page that displays the calendar events for a certain day.\r\n */\r\n@Component({\r\n    selector: 'page-addon-calendar-day',\r\n    templateUrl: 'day.html',\r\n    styleUrls: ['../../calendar-common.scss', 'day.scss'],\r\n})\r\nexport class AddonCalendarDayPage implements OnInit, OnDestroy {\r\n\r\n    protected currentSiteId: string;\r\n    protected year!: number;\r\n    protected month!: number;\r\n    protected day!: number;\r\n    protected categories: { [id: number]: CoreCategoryData } = {};\r\n    protected events: AddonCalendarEventToDisplay[] = []; // Events (both online and offline).\r\n    protected onlineEvents: AddonCalendarEventToDisplay[] = [];\r\n    protected offlineEvents: { [monthId: string]: { [day: number]: AddonCalendarEventToDisplay[] } } =\r\n        {}; // Offline events classified in month & day.\r\n\r\n    protected offlineEditedEventsIds: number[] = []; // IDs of events edited in offline.\r\n    protected deletedEvents: number[] = []; // Events deleted in offline.\r\n    protected timeFormat?: string;\r\n    protected currentTime!: number;\r\n\r\n    // Observers.\r\n    protected newEventObserver: CoreEventObserver;\r\n    protected discardedObserver: CoreEventObserver;\r\n    protected editEventObserver: CoreEventObserver;\r\n    protected deleteEventObserver: CoreEventObserver;\r\n    protected undeleteEventObserver: CoreEventObserver;\r\n    protected syncObserver: CoreEventObserver;\r\n    protected manualSyncObserver: CoreEventObserver;\r\n    protected onlineObserver: Subscription;\r\n    protected obsDefaultTimeChange?: CoreEventObserver;\r\n    protected filterChangedObserver: CoreEventObserver;\r\n\r\n    periodName?: string;\r\n    filteredEvents: AddonCalendarEventToDisplay [] = [];\r\n    canCreate = false;\r\n    courses: Partial<CoreEnrolledCourseData>[] = [];\r\n    loaded = false;\r\n    hasOffline = false;\r\n    isOnline = false;\r\n    syncIcon = CoreConstants.ICON_LOADING;\r\n    isCurrentDay = false;\r\n    isPastDay = false;\r\n    currentMoment!: moment.Moment;\r\n    filter: AddonCalendarFilter = {\r\n        filtered: false,\r\n        courseId: undefined,\r\n        categoryId: undefined,\r\n        course: true,\r\n        group: true,\r\n        site: true,\r\n        user: true,\r\n        category: true,\r\n    };\r\n\r\n    constructor() {\r\n        this.currentSiteId = CoreSites.getCurrentSiteId();\r\n\r\n        if (CoreLocalNotifications.isAvailable()) {\r\n            // Re-schedule events if default time changes.\r\n            this.obsDefaultTimeChange = CoreEvents.on(AddonCalendarProvider.DEFAULT_NOTIFICATION_TIME_CHANGED, () => {\r\n                AddonCalendar.scheduleEventsNotifications(this.onlineEvents);\r\n            }, this.currentSiteId);\r\n        }\r\n\r\n        // Listen for events added. When an event is added, reload the data.\r\n        this.newEventObserver = CoreEvents.on(\r\n            AddonCalendarProvider.NEW_EVENT_EVENT,\r\n            (data) => {\r\n                if (data && data.eventId) {\r\n                    this.loaded = false;\r\n                    this.refreshData(true, true);\r\n                }\r\n            },\r\n            this.currentSiteId,\r\n        );\r\n\r\n        // Listen for new event discarded event. When it does, reload the data.\r\n        this.discardedObserver = CoreEvents.on(AddonCalendarProvider.NEW_EVENT_DISCARDED_EVENT, () => {\r\n            this.loaded = false;\r\n            this.refreshData(true, true);\r\n        }, this.currentSiteId);\r\n\r\n        // Listen for events edited. When an event is edited, reload the data.\r\n        this.editEventObserver = CoreEvents.on(\r\n            AddonCalendarProvider.EDIT_EVENT_EVENT,\r\n            (data) => {\r\n                if (data && data.eventId) {\r\n                    this.loaded = false;\r\n                    this.refreshData(true, true);\r\n                }\r\n            },\r\n            this.currentSiteId,\r\n        );\r\n\r\n        // Refresh data if calendar events are synchronized automatically.\r\n        this.syncObserver = CoreEvents.on(AddonCalendarSyncProvider.AUTO_SYNCED, () => {\r\n            this.loaded = false;\r\n            this.refreshData(false, true);\r\n        }, this.currentSiteId);\r\n\r\n        // Refresh data if calendar events are synchronized manually but not by this page.\r\n        this.manualSyncObserver = CoreEvents.on(AddonCalendarSyncProvider.MANUAL_SYNCED, (data) => {\r\n            if (data && (data.source != 'day' || data.year != this.year || data.month != this.month || data.day != this.day)) {\r\n                this.loaded = false;\r\n                this.refreshData(false, true);\r\n            }\r\n        }, this.currentSiteId);\r\n\r\n        // Update the events when an event is deleted.\r\n        this.deleteEventObserver = CoreEvents.on(\r\n            AddonCalendarProvider.DELETED_EVENT_EVENT,\r\n            (data) => {\r\n                if (data && !data.sent) {\r\n                    // Event was deleted in offline. Just mark it as deleted, no need to refresh.\r\n                    this.hasOffline = this.markAsDeleted(data.eventId, true) || this.hasOffline;\r\n                    this.deletedEvents.push(data.eventId);\r\n                } else {\r\n                    this.loaded = false;\r\n                    this.refreshData(false, true);\r\n                }\r\n            },\r\n            this.currentSiteId,\r\n        );\r\n\r\n        // Listen for events \"undeleted\" (offline).\r\n        this.undeleteEventObserver = CoreEvents.on(\r\n            AddonCalendarProvider.UNDELETED_EVENT_EVENT,\r\n            (data) => {\r\n                if (!data || !data.eventId) {\r\n                    return;\r\n                }\r\n\r\n                // Mark it as undeleted, no need to refresh.\r\n                const found = this.markAsDeleted(data.eventId, false);\r\n\r\n                // Remove it from the list of deleted events if it's there.\r\n                const index = this.deletedEvents.indexOf(data.eventId);\r\n                if (index != -1) {\r\n                    this.deletedEvents.splice(index, 1);\r\n                }\r\n\r\n                if (found) {\r\n                // The deleted event belongs to current list. Re-calculate \"hasOffline\".\r\n                    this.hasOffline = false;\r\n\r\n                    if (this.events.length != this.onlineEvents.length) {\r\n                        this.hasOffline = true;\r\n                    } else {\r\n                        const event = this.events.find((event) => event.deleted || event.offline);\r\n\r\n                        this.hasOffline = !!event;\r\n                    }\r\n                }\r\n            },\r\n            this.currentSiteId,\r\n        );\r\n\r\n        this.filterChangedObserver = CoreEvents.on(\r\n            AddonCalendarProvider.FILTER_CHANGED_EVENT,\r\n            async (data) => {\r\n                this.filter = data;\r\n\r\n                // Course viewed has changed, check if the user can create events for this course calendar.\r\n                this.canCreate = await AddonCalendarHelper.canEditEvents(this.filter.courseId);\r\n\r\n                this.filterEvents();\r\n            },\r\n        );\r\n\r\n        // Refresh online status when changes.\r\n        this.onlineObserver = Network.onChange().subscribe(() => {\r\n            // Execute the callback in the Angular zone, so change detection doesn't stop working.\r\n            NgZone.run(() => {\r\n                this.isOnline = CoreApp.isOnline();\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * View loaded.\r\n     */\r\n    ngOnInit(): void {\r\n        const types: string[] = [];\r\n\r\n        CoreUtils.enumKeys(AddonCalendarEventType).forEach((name) => {\r\n            const value = AddonCalendarEventType[name];\r\n            this.filter[name] = CoreNavigator.getRouteBooleanParam(name) ?? true;\r\n            types.push(value);\r\n        });\r\n        this.filter.courseId = CoreNavigator.getRouteNumberParam('courseId');\r\n        this.filter.categoryId = CoreNavigator.getRouteNumberParam('categoryId');\r\n\r\n        this.filter.filtered = typeof this.filter.courseId != 'undefined' || types.some((name) => !this.filter[name]);\r\n\r\n        const now = new Date();\r\n        this.year = CoreNavigator.getRouteNumberParam('year') || now.getFullYear();\r\n        this.month = CoreNavigator.getRouteNumberParam('month') || (now.getMonth() + 1);\r\n        this.day = CoreNavigator.getRouteNumberParam('day') || now.getDate();\r\n\r\n        this.calculateCurrentMoment();\r\n        this.calculateIsCurrentDay();\r\n\r\n        this.fetchData(true);\r\n    }\r\n\r\n    /**\r\n     * Fetch all the data required for the view.\r\n     *\r\n     * @param sync Whether it should try to synchronize offline events.\r\n     * @param showErrors Whether to show sync errors to the user.\r\n     * @return Promise resolved when done.\r\n     */\r\n    async fetchData(sync?: boolean): Promise<void> {\r\n\r\n        this.syncIcon = CoreConstants.ICON_LOADING;\r\n        this.isOnline = CoreApp.isOnline();\r\n\r\n        if (sync) {\r\n            await this.sync();\r\n        }\r\n\r\n        try {\r\n            const promises: Promise<void>[] = [];\r\n\r\n            // Load courses for the popover.\r\n            promises.push(CoreCoursesHelper.getCoursesForPopover(this.filter.courseId).then((data) => {\r\n                this.courses = data.courses;\r\n\r\n                return;\r\n            }));\r\n\r\n            // Get categories.\r\n            promises.push(this.loadCategories());\r\n\r\n            // Get offline events.\r\n            promises.push(AddonCalendarOffline.getAllEditedEvents().then((offlineEvents) => {\r\n                // Classify them by month & day.\r\n                this.offlineEvents = AddonCalendarHelper.classifyIntoMonths(offlineEvents);\r\n\r\n                // Get the IDs of events edited in offline.\r\n                this.offlineEditedEventsIds = offlineEvents.filter((event) => event.id! > 0).map((event) => event.id!);\r\n\r\n                return;\r\n            }));\r\n\r\n            // Get events deleted in offline.\r\n            promises.push(AddonCalendarOffline.getAllDeletedEventsIds().then((ids) => {\r\n                this.deletedEvents = ids;\r\n\r\n                return;\r\n            }));\r\n\r\n            // Check if user can create events.\r\n            promises.push(AddonCalendarHelper.canEditEvents(this.filter.courseId).then((canEdit) => {\r\n                this.canCreate = canEdit;\r\n\r\n                return;\r\n            }));\r\n\r\n            // Get user preferences.\r\n            promises.push(AddonCalendar.getCalendarTimeFormat().then((value) => {\r\n                this.timeFormat = value;\r\n\r\n                return;\r\n            }));\r\n\r\n            await Promise.all(promises);\r\n\r\n            await this.fetchEvents();\r\n        } catch (error) {\r\n            CoreDomUtils.showErrorModalDefault(error, 'addon.calendar.errorloadevents', true);\r\n        }\r\n\r\n        this.loaded = true;\r\n        this.syncIcon = CoreConstants.ICON_SYNC;\r\n    }\r\n\r\n    /**\r\n     * Fetch the events for current day.\r\n     *\r\n     * @return Promise resolved when done.\r\n     */\r\n    async fetchEvents(): Promise<void> {\r\n        let result: AddonCalendarCalendarDay;\r\n        try {\r\n            // Don't pass courseId and categoryId, we'll filter them locally.\r\n            result = await AddonCalendar.getDayEvents(this.year, this.month, this.day);\r\n            this.onlineEvents = result.events.map((event) => AddonCalendarHelper.formatEventData(event));\r\n        } catch (error) {\r\n            if (CoreApp.isOnline()) {\r\n                throw error;\r\n            }\r\n            // Allow navigating to non-cached days in offline (behave as if using emergency cache).\r\n            this.onlineEvents = [];\r\n        }\r\n\r\n        // Calculate the period name. We don't use the one in result because it's in server's language.\r\n        this.periodName = CoreTimeUtils.userDate(\r\n            new Date(this.year, this.month - 1, this.day).getTime(),\r\n            'core.strftimedaydate',\r\n        );\r\n\r\n        // Schedule notifications for the events retrieved (only future events will be scheduled).\r\n        AddonCalendar.scheduleEventsNotifications(this.onlineEvents);\r\n        // Merge the online events with offline data.\r\n        this.events = this.mergeEvents();\r\n        // Filter events by course.\r\n        this.filterEvents();\r\n        this.calculateIsCurrentDay();\r\n        // Re-calculate the formatted time so it uses the device date.\r\n        const dayTime = this.currentMoment.unix() * 1000;\r\n\r\n        const promises = this.events.map((event) => {\r\n            event.ispast = this.isPastDay || (this.isCurrentDay && this.isEventPast(event));\r\n\r\n            return AddonCalendar.formatEventTime(event, this.timeFormat!, true, dayTime).then((time) => {\r\n                event.formattedtime = time;\r\n\r\n                return;\r\n            });\r\n        });\r\n\r\n        await Promise.all(promises);\r\n    }\r\n\r\n    /**\r\n     * Merge online events with the offline events of that period.\r\n     *\r\n     * @return Merged events.\r\n     */\r\n    protected mergeEvents(): AddonCalendarEventToDisplay[] {\r\n        this.hasOffline = false;\r\n\r\n        if (!Object.keys(this.offlineEvents).length && !this.deletedEvents.length) {\r\n            // No offline events, nothing to merge.\r\n            return this.onlineEvents;\r\n        }\r\n\r\n        const monthOfflineEvents = this.offlineEvents[AddonCalendarHelper.getMonthId(this.year, this.month)];\r\n        const dayOfflineEvents = monthOfflineEvents && monthOfflineEvents[this.day];\r\n        let result = this.onlineEvents;\r\n\r\n        if (this.deletedEvents.length) {\r\n            // Mark as deleted the events that were deleted in offline.\r\n            result.forEach((event) => {\r\n                event.deleted = this.deletedEvents.indexOf(event.id) != -1;\r\n\r\n                if (event.deleted) {\r\n                    this.hasOffline = true;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (this.offlineEditedEventsIds.length) {\r\n            // Remove the online events that were modified in offline.\r\n            result = result.filter((event) => this.offlineEditedEventsIds.indexOf(event.id) == -1);\r\n\r\n            if (result.length != this.onlineEvents.length) {\r\n                this.hasOffline = true;\r\n            }\r\n        }\r\n\r\n        if (dayOfflineEvents && dayOfflineEvents.length) {\r\n            // Add the offline events (either new or edited).\r\n            this.hasOffline = true;\r\n            result = AddonCalendarHelper.sortEvents(result.concat(dayOfflineEvents));\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Filter events based on the filter popover.\r\n     */\r\n    protected filterEvents(): void {\r\n        this.filteredEvents = AddonCalendarHelper.getFilteredEvents(this.events, this.filter, this.categories);\r\n    }\r\n\r\n    /**\r\n     * Refresh the data.\r\n     *\r\n     * @param refresher Refresher.\r\n     * @param done Function to call when done.\r\n     * @return Promise resolved when done.\r\n     */\r\n    async doRefresh(refresher?: IonRefresher, done?: () => void): Promise<void> {\r\n        if (!this.loaded) {\r\n            return;\r\n        }\r\n\r\n        await this.refreshData(true).finally(() => {\r\n            refresher?.complete();\r\n            done && done();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Refresh the data.\r\n     *\r\n     * @param sync Whether it should try to synchronize offline events.\r\n     * @param afterChange Whether the refresh is done after an event has changed or has been synced.\r\n     * @return Promise resolved when done.\r\n     */\r\n    async refreshData(sync?: boolean, afterChange?: boolean): Promise<void> {\r\n        this.syncIcon = CoreConstants.ICON_LOADING;\r\n\r\n        const promises: Promise<void>[] = [];\r\n\r\n        // Don't invalidate day events after a change, it has already been handled.\r\n        if (!afterChange) {\r\n            promises.push(AddonCalendar.invalidateDayEvents(this.year, this.month, this.day));\r\n        }\r\n        promises.push(AddonCalendar.invalidateAllowedEventTypes());\r\n        promises.push(CoreCourses.invalidateCategories(0, true));\r\n        promises.push(AddonCalendar.invalidateTimeFormat());\r\n\r\n        await Promise.all(promises).finally(() =>\r\n            this.fetchData(sync));\r\n    }\r\n\r\n    /**\r\n     * Load categories to be able to filter events.\r\n     *\r\n     * @return Promise resolved when done.\r\n     */\r\n    protected async loadCategories(): Promise<void> {\r\n        try {\r\n            const cats = await CoreCourses.getCategories(0, true);\r\n            this.categories = {};\r\n\r\n            // Index categories by ID.\r\n            cats.forEach((category) => {\r\n                this.categories[category.id] = category;\r\n            });\r\n        } catch {\r\n            // Ignore errors.\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Try to synchronize offline events.\r\n     *\r\n     * @param showErrors Whether to show sync errors to the user.\r\n     * @return Promise resolved when done.\r\n     */\r\n    protected async sync(showErrors?: boolean): Promise<void> {\r\n        try {\r\n            const result = await AddonCalendarSync.syncEvents();\r\n\r\n            if (result.warnings && result.warnings.length) {\r\n                CoreDomUtils.showErrorModal(result.warnings[0]);\r\n            }\r\n\r\n            if (result.updated) {\r\n                // Trigger a manual sync event.\r\n                result.source = 'day';\r\n                result.day = this.day;\r\n                result.month = this.month;\r\n                result.year = this.year;\r\n\r\n                CoreEvents.trigger(AddonCalendarSyncProvider.MANUAL_SYNCED, result, this.currentSiteId);\r\n            }\r\n        } catch (error) {\r\n            if (showErrors) {\r\n                CoreDomUtils.showErrorModalDefault(error, 'core.errorsync', true);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Navigate to a particular event.\r\n     *\r\n     * @param eventId Event to load.\r\n     */\r\n    gotoEvent(eventId: number): void {\r\n        if (eventId < 0) {\r\n            // It's an offline event, go to the edit page.\r\n            this.openEdit(eventId);\r\n        } else {\r\n            CoreNavigator.navigateToSitePath(`/calendar/event/${eventId}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Show the context menu.\r\n     *\r\n     * @param event Event.\r\n     */\r\n    async openFilter(event: MouseEvent): Promise<void> {\r\n        await CoreDomUtils.openPopover({\r\n            component: AddonCalendarFilterPopoverComponent,\r\n            componentProps: {\r\n                courses: this.courses,\r\n                filter: this.filter,\r\n            },\r\n            event,\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Open page to create/edit an event.\r\n     *\r\n     * @param eventId Event ID to edit.\r\n     */\r\n    openEdit(eventId?: number): void {\r\n        const params: Params = {};\r\n\r\n        if (!eventId) {\r\n            // It's a new event, set the time.\r\n            eventId = 0;\r\n            params.timestamp = moment().year(this.year).month(this.month - 1).date(this.day).unix() * 1000;\r\n        }\r\n\r\n        if (this.filter.courseId) {\r\n            params.courseId = this.filter.courseId;\r\n        }\r\n\r\n        CoreNavigator.navigateToSitePath(`/calendar/edit/${eventId}`, { params });\r\n    }\r\n\r\n    /**\r\n     * Calculate current moment.\r\n     */\r\n    calculateCurrentMoment(): void {\r\n        this.currentMoment = moment().year(this.year).month(this.month - 1).date(this.day);\r\n    }\r\n\r\n    /**\r\n     * Check if user is viewing the current day.\r\n     */\r\n    calculateIsCurrentDay(): void {\r\n        const now = new Date();\r\n\r\n        this.currentTime = CoreTimeUtils.timestamp();\r\n\r\n        this.isCurrentDay = this.year == now.getFullYear() && this.month == now.getMonth() + 1 && this.day == now.getDate();\r\n        this.isPastDay = this.year < now.getFullYear() || (this.year == now.getFullYear() && this.month < now.getMonth()) ||\r\n            (this.year == now.getFullYear() && this.month == now.getMonth() + 1 && this.day < now.getDate());\r\n    }\r\n\r\n    /**\r\n     * Go to current day.\r\n     */\r\n    async goToCurrentDay(): Promise<void> {\r\n        const now = new Date();\r\n        const initialDay = this.day;\r\n        const initialMonth = this.month;\r\n        const initialYear = this.year;\r\n\r\n        this.day = now.getDate();\r\n        this.month = now.getMonth() + 1;\r\n        this.year = now.getFullYear();\r\n        this.calculateCurrentMoment();\r\n\r\n        this.loaded = false;\r\n\r\n        try {\r\n            await this.fetchEvents();\r\n\r\n            this.isCurrentDay = true;\r\n        } catch (error) {\r\n            CoreDomUtils.showErrorModalDefault(error, 'addon.calendar.errorloadevents', true);\r\n\r\n            this.year = initialYear;\r\n            this.month = initialMonth;\r\n            this.day = initialDay;\r\n            this.calculateCurrentMoment();\r\n        }\r\n\r\n        this.loaded = true;\r\n    }\r\n\r\n    /**\r\n     * Load next day.\r\n     */\r\n    async loadNext(): Promise<void> {\r\n        this.increaseDay();\r\n\r\n        this.loaded = false;\r\n\r\n        try {\r\n            await this.fetchEvents();\r\n        } catch (error) {\r\n            CoreDomUtils.showErrorModalDefault(error, 'addon.calendar.errorloadevents', true);\r\n            this.decreaseDay();\r\n        }\r\n        this.loaded = true;\r\n    }\r\n\r\n    /**\r\n     * Load previous day.\r\n     */\r\n    async loadPrevious(): Promise<void> {\r\n        this.decreaseDay();\r\n\r\n        this.loaded = false;\r\n\r\n        try {\r\n            await this.fetchEvents();\r\n        } catch (error) {\r\n            CoreDomUtils.showErrorModalDefault(error, 'addon.calendar.errorloadevents', true);\r\n            this.increaseDay();\r\n        }\r\n        this.loaded = true;\r\n    }\r\n\r\n    /**\r\n     * Decrease the current day.\r\n     */\r\n    protected decreaseDay(): void {\r\n        this.currentMoment.subtract(1, 'day');\r\n\r\n        this.year = this.currentMoment.year();\r\n        this.month = this.currentMoment.month() + 1;\r\n        this.day = this.currentMoment.date();\r\n    }\r\n\r\n    /**\r\n     * Increase the current day.\r\n     */\r\n    protected increaseDay(): void {\r\n        this.currentMoment.add(1, 'day');\r\n\r\n        this.year = this.currentMoment.year();\r\n        this.month = this.currentMoment.month() + 1;\r\n        this.day = this.currentMoment.date();\r\n    }\r\n\r\n    /**\r\n     * Find an event and mark it as deleted.\r\n     *\r\n     * @param eventId Event ID.\r\n     * @param deleted Whether to mark it as deleted or not.\r\n     * @return Whether the event was found.\r\n     */\r\n    protected markAsDeleted(eventId: number, deleted: boolean): boolean {\r\n        const event = this.onlineEvents.find((event) => event.id == eventId);\r\n\r\n        if (event) {\r\n            event.deleted = deleted;\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Returns if the event is in the past or not.\r\n     *\r\n     * @param event Event object.\r\n     * @return True if it's in the past.\r\n     */\r\n    isEventPast(event: AddonCalendarEventToDisplay): boolean {\r\n        return (event.timestart + event.timeduration) < this.currentTime;\r\n    }\r\n\r\n    /**\r\n     * Page destroyed.\r\n     */\r\n    ngOnDestroy(): void {\r\n        this.newEventObserver?.off();\r\n        this.discardedObserver?.off();\r\n        this.editEventObserver?.off();\r\n        this.deleteEventObserver?.off();\r\n        this.undeleteEventObserver?.off();\r\n        this.syncObserver?.off();\r\n        this.manualSyncObserver?.off();\r\n        this.onlineObserver?.unsubscribe();\r\n        this.filterChangedObserver?.off();\r\n        this.obsDefaultTimeChange?.off();\r\n    }\r\n\r\n}\r\n","export default \":host .addon-calendar-period {\\n  flex-grow: 3;\\n}\\n:host .addon-calendar-period h3 {\\n  margin-top: 10px;\\n  font-size: 1.2rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hZGRvbnMvY2FsZW5kYXIvcGFnZXMvZGF5L2RheS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNJO0VBQ0ksWUFBQTtBQUFSO0FBQ1E7RUFDSSxnQkFBQTtFQUNBLGlCQUFBO0FBQ1oiLCJmaWxlIjoic3JjL2FkZG9ucy9jYWxlbmRhci9wYWdlcy9kYXkvZGF5LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XHJcbiAgICAuYWRkb24tY2FsZW5kYXItcGVyaW9kIHtcclxuICAgICAgICBmbGV4LWdyb3c6IDM7XHJcbiAgICAgICAgaDMge1xyXG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDEuMnJlbTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19 */\";"],"sourceRoot":"webpack:///"}