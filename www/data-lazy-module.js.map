{"version":3,"sources":["./src/addons/mod/data/pages/edit/edit.html","./src/addons/mod/data/pages/entry/entry.html","./src/addons/mod/data/pages/index/index.html","./src/addons/mod/data/data-lazy.module.ts","./src/addons/mod/data/pages/edit/edit.ts","./src/addons/mod/data/pages/entry/entry.ts","./src/addons/mod/data/pages/index/index.ts"],"names":[],"mappings":"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","file":"data-lazy-module.js","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <h1>\\r\\n            <core-format-text [text]=\\\"title\\\" contextLevel=\\\"module\\\" [contextInstanceId]=\\\"module.id\\\" [courseId]=\\\"courseId\\\">\\r\\n            </core-format-text>\\r\\n        </h1>\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n            <ion-button *ngIf=\\\"entry\\\" fill=\\\"clear\\\" (click)=\\\"save($event)\\\">\\r\\n                {{ 'core.save' | translate }}\\r\\n            </ion-button>\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <core-loading [hideUntil]=\\\"loaded\\\">\\r\\n        <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"groupInfo && (groupInfo.separateGroups || groupInfo.visibleGroups)\\\">\\r\\n            <ion-label id=\\\"addon-data-groupslabel\\\">\\r\\n                <ng-container *ngIf=\\\"groupInfo.separateGroups\\\">{{ 'core.groupsvisible' | translate }}</ng-container>\\r\\n                <ng-container *ngIf=\\\"groupInfo.visibleGroups\\\">{{ 'core.groupsseparate' | translate }}</ng-container>\\r\\n            </ion-label>\\r\\n            <ion-select [(ngModel)]=\\\"selectedGroup\\\" (ionChange)=\\\"setGroup(selectedGroup)\\\" aria-labelledby=\\\"addon-data-groupslabel\\\"\\r\\n                interface=\\\"action-sheet\\\" [interfaceOptions]=\\\"{header: 'core.group' | translate}\\\">\\r\\n                <ion-select-option *ngFor=\\\"let groupOpt of groupInfo.groups\\\" [value]=\\\"groupOpt.id\\\">\\r\\n                    {{groupOpt.name}}\\r\\n                </ion-select-option>\\r\\n            </ion-select>\\r\\n        </ion-item>\\r\\n\\r\\n        <div class=\\\"addon-data-contents {{cssClass}}\\\" *ngIf=\\\"database\\\">\\r\\n            <core-style [css]=\\\"database.csstemplate\\\" prefix=\\\".{{cssClass}}\\\"></core-style>\\r\\n\\r\\n            <form (ngSubmit)=\\\"save($event)\\\" [formGroup]=\\\"editForm\\\" #editFormEl>\\r\\n                <core-compile-html [text]=\\\"editFormRender\\\" [jsData]=\\\"jsData\\\" [extraImports]=\\\"extraImports\\\"></core-compile-html>\\r\\n            </form>\\r\\n        </div>\\r\\n    </core-loading>\\r\\n</ion-content>\\r\\n\";","export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <h1>\\r\\n            <core-format-text [text]=\\\"title\\\" contextLevel=\\\"module\\\" [contextInstanceId]=\\\"module.id\\\" [courseId]=\\\"courseId\\\">\\r\\n            </core-format-text>\\r\\n        </h1>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <ion-refresher slot=\\\"fixed\\\"\\r\\n        [disabled]=\\\"!entryLoaded || !(isPullingToRefresh || !renderingEntry && !loadingRating && !loadingComments)\\\"\\r\\n        (ionRefresh)=\\\"refreshDatabase($event.target)\\\">\\r\\n        <ion-refresher-content pullingText=\\\"{{ 'core.pulltorefresh' | translate }}\\\"></ion-refresher-content>\\r\\n    </ion-refresher>\\r\\n    <core-loading [hideUntil]=\\\"entryLoaded && (isPullingToRefresh || !renderingEntry && !loadingRating && !loadingComments)\\\">\\r\\n        <!-- Database entries found to be synchronized -->\\r\\n        <ion-card class=\\\"core-warning-card\\\" *ngIf=\\\"entry && entry.hasOffline\\\">\\r\\n            <ion-item>\\r\\n                <ion-icon name=\\\"fas-exclamation-triangle\\\" slot=\\\"start\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                <ion-label>{{ 'core.hasdatatosync' | translate: {$a: moduleName} }}</ion-label>\\r\\n            </ion-item>\\r\\n        </ion-card>\\r\\n\\r\\n        <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"groupInfo && (groupInfo.separateGroups || groupInfo.visibleGroups)\\\">\\r\\n            <ion-label id=\\\"addon-data-groupslabel\\\">\\r\\n                <ng-container *ngIf=\\\"groupInfo.separateGroups\\\">{{ 'core.groupsvisible' | translate }}</ng-container>\\r\\n                <ng-container *ngIf=\\\"groupInfo.visibleGroups\\\">{{ 'core.groupsseparate' | translate }}</ng-container>\\r\\n            </ion-label>\\r\\n            <ion-select [(ngModel)]=\\\"selectedGroup\\\" (ionChange)=\\\"setGroup(selectedGroup)\\\" aria-labelledby=\\\"addon-data-groupslabel\\\"\\r\\n                interface=\\\"action-sheet\\\" [interfaceOptions]=\\\"{header: 'core.group' | translate}\\\">\\r\\n                <ion-select-option *ngFor=\\\"let groupOpt of groupInfo.groups\\\" [value]=\\\"groupOpt.id\\\">\\r\\n                    {{groupOpt.name}}\\r\\n                </ion-select-option>\\r\\n            </ion-select>\\r\\n        </ion-item>\\r\\n\\r\\n        <div class=\\\"addon-data-contents addon-data-entry addon-data-entries-{{database.id}}\\\" *ngIf=\\\"database && entry\\\">\\r\\n            <core-style [css]=\\\"database.csstemplate\\\" prefix=\\\".addon-data-entries-{{database.id}}\\\"></core-style>\\r\\n\\r\\n            <core-compile-html [text]=\\\"entryHtml\\\" [jsData]=\\\"jsData\\\" [extraImports]=\\\"extraImports\\\"\\r\\n                (compiling)=\\\"setRenderingEntry($event)\\\"></core-compile-html>\\r\\n        </div>\\r\\n\\r\\n        <core-rating-rate *ngIf=\\\"database && entry && ratingInfo && (!database.approval || entry.approved)\\\"\\r\\n            [ratingInfo]=\\\"ratingInfo\\\" contextLevel=\\\"module\\\" [instanceId]=\\\"database.coursemodule\\\" [itemId]=\\\"entry.id\\\" [itemSetId]=\\\"0\\\"\\r\\n            [courseId]=\\\"courseId\\\" [aggregateMethod]=\\\"database.assessed\\\" [scaleId]=\\\"database.scale\\\" [userId]=\\\"entry.userid\\\"\\r\\n            (onLoading)=\\\"setLoadingRating($event)\\\" (onUpdate)=\\\"ratingUpdated()\\\">\\r\\n        </core-rating-rate>\\r\\n        <core-rating-aggregate *ngIf=\\\"database && entry && ratingInfo\\\" [ratingInfo]=\\\"ratingInfo\\\" contextLevel=\\\"module\\\"\\r\\n            [instanceId]=\\\"database.coursemodule\\\" [itemId]=\\\"entry.id\\\" [courseId]=\\\"courseId\\\" [aggregateMethod]=\\\"database.assessed\\\"\\r\\n            [scaleId]=\\\"database.scale\\\">\\r\\n        </core-rating-aggregate>\\r\\n\\r\\n        <core-comments *ngIf=\\\"database && database.comments && entry && entry.id > 0 && commentsEnabled\\\"\\r\\n            contextLevel=\\\"module\\\" [instanceId]=\\\"database.coursemodule\\\" component=\\\"mod_data\\\" [itemId]=\\\"entry.id\\\"\\r\\n            area=\\\"database_entry\\\" [courseId]=\\\"courseId\\\" (onLoading)=\\\"setLoadingComments($event)\\\" [showItem]=\\\"true\\\">\\r\\n        </core-comments>\\r\\n\\r\\n        <ion-grid *ngIf=\\\"hasPrevious || hasNext\\\">\\r\\n            <ion-row class=\\\"ion-align-items-center\\\">\\r\\n                <ion-col *ngIf=\\\"hasPrevious\\\">\\r\\n                    <ion-button expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"gotoEntry(offset! -1)\\\">\\r\\n                        <ion-icon name=\\\"fas-chevron-left\\\" slot=\\\"start\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                        {{ 'core.previous' | translate }}\\r\\n                    </ion-button>\\r\\n                </ion-col>\\r\\n                <ion-col *ngIf=\\\"hasNext\\\">\\r\\n                    <ion-button expand=\\\"block\\\" (click)=\\\"gotoEntry(offset! + 1)\\\">\\r\\n                        {{ 'core.next' | translate }}\\r\\n                        <ion-icon name=\\\"fas-chevron-right\\\" slot=\\\"end\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                    </ion-button>\\r\\n                </ion-col>\\r\\n            </ion-row>\\r\\n        </ion-grid>\\r\\n    </core-loading>\\r\\n</ion-content>\\r\\n\";","export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <h1>\\r\\n            <core-format-text [text]=\\\"title\\\" contextLevel=\\\"module\\\" [contextInstanceId]=\\\"module.id\\\" [courseId]=\\\"courseId\\\">\\r\\n            </core-format-text>\\r\\n        </h1>\\r\\n\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n            <!-- The buttons defined by the component will be added in here. -->\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <ion-refresher slot=\\\"fixed\\\" [disabled]=\\\"!activityComponent?.loaded\\\" (ionRefresh)=\\\"activityComponent?.doRefresh($event.target)\\\">\\r\\n        <ion-refresher-content pullingText=\\\"{{ 'core.pulltorefresh' | translate }}\\\"></ion-refresher-content>\\r\\n    </ion-refresher>\\r\\n\\r\\n    <addon-mod-data-index [module]=\\\"module\\\" [courseId]=\\\"courseId\\\" [group]=\\\"group\\\" (dataRetrieved)=\\\"updateData($event)\\\">\\r\\n    </addon-mod-data-index>\\r\\n</ion-content>\\r\\n\";","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { CoreSharedModule } from '@/core/shared.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { CoreCommentsComponentsModule } from '@features/comments/components/components.module';\r\nimport { CoreCompileHtmlComponentModule } from '@features/compile/components/compile-html/compile-html.module';\r\nimport { CoreRatingComponentsModule } from '@features/rating/components/components.module';\r\nimport { CanLeaveGuard } from '@guards/can-leave';\r\nimport { AddonModDataComponentsCompileModule } from './components/components-compile.module';\r\nimport { AddonModDataComponentsModule } from './components/components.module';\r\nimport { AddonModDataEditPage } from './pages/edit/edit';\r\nimport { AddonModDataEntryPage } from './pages/entry/entry';\r\nimport { AddonModDataIndexPage } from './pages/index/index';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: ':courseId/:cmId',\r\n        component: AddonModDataIndexPage,\r\n    },\r\n    {\r\n        path: ':courseId/:cmId/edit',\r\n        component: AddonModDataEditPage,\r\n        canDeactivate: [CanLeaveGuard],\r\n    },\r\n    {\r\n        path: ':courseId/:cmId/edit/:entryId',\r\n        component: AddonModDataEditPage,\r\n        canDeactivate: [CanLeaveGuard],\r\n    },\r\n    {\r\n        path: ':courseId/:cmId/:entryId',\r\n        component: AddonModDataEntryPage,\r\n    },\r\n];\r\n\r\n@NgModule({\r\n    imports: [\r\n        RouterModule.forChild(routes),\r\n        CoreSharedModule,\r\n        AddonModDataComponentsModule,\r\n        AddonModDataComponentsCompileModule,\r\n        CoreCommentsComponentsModule,\r\n        CoreRatingComponentsModule,\r\n        CoreCompileHtmlComponentModule,\r\n    ],\r\n    declarations: [\r\n        AddonModDataIndexPage,\r\n        AddonModDataEntryPage,\r\n        AddonModDataEditPage,\r\n    ],\r\n})\r\nexport class AddonModDataLazyModule {}\r\n","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, OnInit, ViewChild, ElementRef, Type } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { CoreError } from '@classes/errors/error';\r\nimport { CoreCourseModule } from '@features/course/services/course-helper';\r\nimport { CoreFileUploader } from '@features/fileuploader/services/fileuploader';\r\nimport { CoreTag } from '@features/tag/services/tag';\r\nimport { IonContent } from '@ionic/angular';\r\nimport { CoreGroupInfo, CoreGroups } from '@services/groups';\r\nimport { CoreNavigator } from '@services/navigator';\r\nimport { CoreSites } from '@services/sites';\r\nimport { CoreDomUtils } from '@services/utils/dom';\r\nimport { CoreForms } from '@singletons/form';\r\nimport { CoreUtils } from '@services/utils/utils';\r\nimport { Translate } from '@singletons';\r\nimport { CoreEvents } from '@singletons/events';\r\nimport { AddonModDataComponentsCompileModule } from '../../components/components-compile.module';\r\nimport {\r\n    AddonModDataData,\r\n    AddonModDataField,\r\n    AddonModDataProvider,\r\n    AddonModData,\r\n    AddonModDataTemplateType,\r\n    AddonModDataEntry,\r\n    AddonModDataEntryFields,\r\n    AddonModDataEditEntryResult,\r\n    AddonModDataAddEntryResult,\r\n    AddonModDataEntryWSField,\r\n} from '../../services/data';\r\nimport { AddonModDataHelper } from '../../services/data-helper';\r\n\r\n/**\r\n * Page that displays the view edit page.\r\n */\r\n@Component({\r\n    selector: 'page-addon-mod-data-edit',\r\n    templateUrl: 'edit.html',\r\n    styleUrls: ['../../data.scss', '../../data-forms.scss'],\r\n})\r\nexport class AddonModDataEditPage implements OnInit {\r\n\r\n    @ViewChild(IonContent) content?: IonContent;\r\n    @ViewChild('editFormEl') formElement!: ElementRef;\r\n\r\n    protected entryId?: number;\r\n    protected fieldsArray: AddonModDataField[] = [];\r\n    protected siteId: string;\r\n    protected offline = false;\r\n    protected forceLeave = false; // To allow leaving the page without checking for changes.\r\n    protected initialSelectedGroup?: number;\r\n    protected isEditing = false;\r\n\r\n    entry?: AddonModDataEntry;\r\n    fields: Record<number, AddonModDataField> = {};\r\n    courseId!: number;\r\n    module!: CoreCourseModule;\r\n    database?: AddonModDataData;\r\n    title = '';\r\n    component = AddonModDataProvider.COMPONENT;\r\n    loaded = false;\r\n    selectedGroup = 0;\r\n    cssClass = '';\r\n    groupInfo?: CoreGroupInfo;\r\n    editFormRender = '';\r\n    editForm: FormGroup;\r\n    extraImports: Type<unknown>[] = [AddonModDataComponentsCompileModule];\r\n    jsData?: {\r\n        fields: Record<number, AddonModDataField>;\r\n        database?: AddonModDataData;\r\n        contents: AddonModDataEntryFields;\r\n        errors?: Record<number, string>;\r\n        form: FormGroup;\r\n    };\r\n\r\n    errors: Record<number, string> = {};\r\n\r\n    constructor() {\r\n        this.siteId = CoreSites.getCurrentSiteId();\r\n        this.editForm = new FormGroup({});\r\n    }\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    ngOnInit(): void {\r\n        this.module = CoreNavigator.getRouteParam<CoreCourseModule>('module')!;\r\n        this.entryId = CoreNavigator.getRouteNumberParam('entryId') || undefined;\r\n        this.courseId = CoreNavigator.getRouteNumberParam('courseId')!;\r\n        this.selectedGroup = CoreNavigator.getRouteNumberParam('group') || 0;\r\n\r\n        // If entryId is lower than 0 or null, it is a new entry or an offline entry.\r\n        this.isEditing = typeof this.entryId != 'undefined' && this.entryId > 0;\r\n\r\n        this.title = this.module.name;\r\n\r\n        this.fetchEntryData(true);\r\n    }\r\n\r\n    /**\r\n     * Check if we can leave the page or not and ask to confirm the lost of data.\r\n     *\r\n     * @return True if we can leave, false otherwise.\r\n     */\r\n    async canLeave(): Promise<boolean> {\r\n        if (this.forceLeave || !this.entry) {\r\n            return true;\r\n        }\r\n\r\n        const inputData = this.editForm.value;\r\n\r\n        let changed = AddonModDataHelper.hasEditDataChanged(inputData, this.fieldsArray, this.entry.contents);\r\n        changed = changed || (!this.isEditing && this.initialSelectedGroup != this.selectedGroup);\r\n\r\n        if (changed) {\r\n            // Show confirmation if some data has been modified.\r\n            await CoreDomUtils.showConfirm(Translate.instant('coentryre.confirmcanceledit'));\r\n        }\r\n\r\n        // Delete the local files from the tmp folder.\r\n        const files = await AddonModDataHelper.getEditTmpFiles(inputData, this.fieldsArray, this.entry!.contents);\r\n        CoreFileUploader.clearTmpFiles(files);\r\n\r\n        CoreForms.triggerFormCancelledEvent(this.formElement, this.siteId);\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Fetch the entry data.\r\n     *\r\n     * @param refresh To refresh all downloaded data.\r\n     * @return Resolved when done.\r\n     */\r\n    protected async fetchEntryData(refresh = false): Promise<void> {\r\n        try {\r\n            this.database = await AddonModData.getDatabase(this.courseId, this.module.id);\r\n            this.title = this.database.name || this.title;\r\n            this.cssClass = 'addon-data-entries-' + this.database.id;\r\n\r\n            this.fieldsArray = await AddonModData.getFields(this.database.id, { cmId: this.module.id });\r\n            this.fields = CoreUtils.arrayToObject(this.fieldsArray, 'id');\r\n\r\n            const entry = await AddonModDataHelper.fetchEntry(this.database, this.fieldsArray, this.entryId || 0);\r\n            this.entry = entry.entry;\r\n\r\n            // Load correct group.\r\n            this.selectedGroup = this.entry.groupid;\r\n\r\n            // Check permissions when adding a new entry or offline entry.\r\n            if (!this.isEditing) {\r\n                let haveAccess = false;\r\n\r\n                if (refresh) {\r\n                    this.groupInfo = await CoreGroups.getActivityGroupInfo(this.database.coursemodule);\r\n                    this.selectedGroup = CoreGroups.validateGroupId(this.selectedGroup, this.groupInfo);\r\n                    this.initialSelectedGroup = this.selectedGroup;\r\n                }\r\n\r\n                if (this.groupInfo?.groups && this.groupInfo.groups.length > 0) {\r\n                    if (refresh) {\r\n                        const canAddGroup: Record<number, boolean> = {};\r\n\r\n                        await Promise.all(this.groupInfo.groups.map(async (group) => {\r\n                            const accessData = await AddonModData.getDatabaseAccessInformation(this.database!.id, {\r\n                                cmId: this.module.id, groupId: group.id });\r\n\r\n                            canAddGroup[group.id] = accessData.canaddentry;\r\n                        }));\r\n\r\n                        this.groupInfo.groups = this.groupInfo.groups.filter((group) => !!canAddGroup[group.id]);\r\n\r\n                        haveAccess = canAddGroup[this.selectedGroup];\r\n                    } else {\r\n                        // Groups already filtered, so it have access.\r\n                        haveAccess = true;\r\n                    }\r\n                } else {\r\n                    const accessData = await AddonModData.getDatabaseAccessInformation(this.database.id, { cmId: this.module.id });\r\n                    haveAccess = accessData.canaddentry;\r\n                }\r\n\r\n                if (!haveAccess) {\r\n                    // You shall not pass, go back.\r\n                    CoreDomUtils.showErrorModal('addon.mod_data.noaccess', true);\r\n\r\n                    // Go back to entry list.\r\n                    this.forceLeave = true;\r\n                    CoreNavigator.back();\r\n\r\n                    return;\r\n                }\r\n            }\r\n\r\n            this.editFormRender = this.displayEditFields();\r\n        } catch (error) {\r\n            CoreDomUtils.showErrorModalDefault(error, 'core.course.errorgetmodule', true);\r\n        }\r\n\r\n        this.loaded = true;\r\n    }\r\n\r\n    /**\r\n     * Saves data.\r\n     *\r\n     * @param e Event.\r\n     * @return Resolved when done.\r\n     */\r\n    async save(e: Event): Promise<void> {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        const inputData = this.editForm.value;\r\n\r\n        try {\r\n            let changed = AddonModDataHelper.hasEditDataChanged(\r\n                inputData,\r\n                this.fieldsArray,\r\n                this.entry?.contents || {},\r\n            );\r\n\r\n            changed = changed || (!this.isEditing && this.initialSelectedGroup != this.selectedGroup);\r\n            if (!changed) {\r\n                if (this.entryId) {\r\n                    await this.returnToEntryList();\r\n\r\n                    return;\r\n                }\r\n\r\n                // New entry, no changes means no field filled, warn the user.\r\n                throw new CoreError(Translate.instant('addon.mod_data.emptyaddform'));\r\n            }\r\n\r\n            const modal = await CoreDomUtils.showModalLoading('core.sending', true);\r\n\r\n            // Create an ID to assign files.\r\n            const entryTemp = this.entryId ? this.entryId : - (new Date().getTime());\r\n            let editData: AddonModDataEntryWSField[] = [];\r\n\r\n            try {\r\n                try {\r\n                    editData = await AddonModDataHelper.getEditDataFromForm(\r\n                        inputData,\r\n                        this.fieldsArray,\r\n                        this.database!.id,\r\n                        entryTemp,\r\n                        this.entry?.contents || {},\r\n                        this.offline,\r\n                    );\r\n                } catch (error) {\r\n                    if (this.offline) {\r\n                        throw error;\r\n                    }\r\n                    // Cannot submit in online, prepare for offline usage.\r\n                    this.offline = true;\r\n\r\n                    editData = await AddonModDataHelper.getEditDataFromForm(\r\n                        inputData,\r\n                        this.fieldsArray,\r\n                        this.database!.id,\r\n                        entryTemp,\r\n                        this.entry?.contents || {},\r\n                        this.offline,\r\n                    );\r\n                }\r\n\r\n                if (editData.length <= 0) {\r\n                    // No field filled, warn the user.\r\n                    throw new CoreError(Translate.instant('addon.mod_data.emptyaddform'));\r\n                }\r\n\r\n                let updateEntryResult: AddonModDataEditEntryResult | AddonModDataAddEntryResult | undefined;\r\n                if (this.isEditing) {\r\n                    updateEntryResult = await AddonModData.editEntry(\r\n                        this.database!.id,\r\n                        this.entryId!,\r\n                        this.courseId,\r\n                        editData,\r\n                        this.fieldsArray,\r\n                        this.siteId,\r\n                        this.offline,\r\n                    );\r\n                } else {\r\n                    updateEntryResult = await AddonModData.addEntry(\r\n                        this.database!.id,\r\n                        entryTemp,\r\n                        this.courseId,\r\n                        editData,\r\n                        this.selectedGroup,\r\n                        this.fieldsArray,\r\n                        this.siteId,\r\n                        this.offline,\r\n                    );\r\n                }\r\n\r\n                // This is done if entry is updated when editing or creating if not.\r\n                if ((this.isEditing && 'updated' in updateEntryResult && updateEntryResult.updated) ||\r\n                    (!this.isEditing && 'newentryid' in updateEntryResult && updateEntryResult.newentryid)) {\r\n\r\n                    CoreForms.triggerFormSubmittedEvent(this.formElement, updateEntryResult.sent, this.siteId);\r\n\r\n                    const promises: Promise<void>[] = [];\r\n\r\n                    if (updateEntryResult.sent) {\r\n                        CoreEvents.trigger(CoreEvents.ACTIVITY_DATA_SENT, { module: 'data' });\r\n\r\n                        if (this.isEditing) {\r\n                            promises.push(AddonModData.invalidateEntryData(this.database!.id, this.entryId!, this.siteId));\r\n                        }\r\n                        promises.push(AddonModData.invalidateEntriesData(this.database!.id, this.siteId));\r\n                    }\r\n\r\n                    try {\r\n                        await Promise.all(promises);\r\n                        CoreEvents.trigger(\r\n                            AddonModDataProvider.ENTRY_CHANGED,\r\n                            { dataId: this.database!.id, entryId: this.entryId },\r\n\r\n                            this.siteId,\r\n                        );\r\n                    } finally {\r\n                        this.returnToEntryList();\r\n                    }\r\n                } else {\r\n                    this.errors = {};\r\n                    if (updateEntryResult.fieldnotifications) {\r\n                        updateEntryResult.fieldnotifications.forEach((fieldNotif) => {\r\n                            const field = this.fieldsArray.find((field) => field.name == fieldNotif.fieldname);\r\n                            if (field) {\r\n                                this.errors[field.id] = fieldNotif.notification;\r\n                            }\r\n                        });\r\n                    }\r\n                    this.jsData!.errors = this.errors;\r\n\r\n                    setTimeout(() => {\r\n                        this.scrollToFirstError();\r\n                    });\r\n                }\r\n            } finally {\r\n                modal.dismiss();\r\n            }\r\n        } catch (error) {\r\n            CoreDomUtils.showErrorModalDefault(error, 'Cannot edit entry', true);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set group to see the database.\r\n     *\r\n     * @param groupId Group identifier to set.\r\n     * @return Resolved when done.\r\n     */\r\n    setGroup(groupId: number): Promise<void> {\r\n        this.selectedGroup = groupId;\r\n        this.loaded = false;\r\n\r\n        return this.fetchEntryData();\r\n    }\r\n\r\n    /**\r\n     * Displays Edit Search Fields.\r\n     *\r\n     * @return Generated HTML.\r\n     */\r\n    protected displayEditFields(): string {\r\n        this.jsData = {\r\n            fields: this.fields,\r\n            contents: CoreUtils.clone(this.entry?.contents) || {},\r\n            form: this.editForm,\r\n            database: this.database,\r\n            errors: this.errors,\r\n        };\r\n\r\n        let template = AddonModDataHelper.getTemplate(this.database!, AddonModDataTemplateType.ADD, this.fieldsArray);\r\n\r\n        // Replace the fields found on template.\r\n        this.fieldsArray.forEach((field) => {\r\n            let replace = '[[' + field.name + ']]';\r\n            replace = replace.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, '\\\\$&');\r\n            let replaceRegEx = new RegExp(replace, 'gi');\r\n\r\n            // Replace field by a generic directive.\r\n            const render = '<addon-mod-data-field-plugin [class.has-errors]=\"!!errors[' + field.id + ']\" mode=\"edit\" \\\r\n                [field]=\"fields[' + field.id + ']\" [value]=\"contents[' + field.id + ']\" [form]=\"form\" [database]=\"database\" \\\r\n                [error]=\"errors[' + field.id + ']\"></addon-mod-data-field-plugin>';\r\n            template = template.replace(replaceRegEx, render);\r\n\r\n            // Replace the field id tag.\r\n            replace = '[[' + field.name + '#id]]';\r\n            replace = replace.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, '\\\\$&');\r\n            replaceRegEx = new RegExp(replace, 'gi');\r\n\r\n            template = template.replace(replaceRegEx, 'field_' + field.id);\r\n        });\r\n\r\n        // Editing tags is not supported.\r\n        const replaceRegEx = new RegExp('##tags##', 'gi');\r\n        const message = CoreTag.areTagsAvailableInSite()\r\n            ? '<p class=\"item-dimmed\">{{ \\'addon.mod_data.edittagsnotsupported\\' | translate }}</p>'\r\n            : '';\r\n        template = template.replace(replaceRegEx, message);\r\n\r\n        return template;\r\n    }\r\n\r\n    /**\r\n     * Return to the entry list (previous page) discarding temp data.\r\n     *\r\n     * @return Resolved when done.\r\n     */\r\n    protected async returnToEntryList(): Promise<void> {\r\n        const inputData = this.editForm.value;\r\n\r\n        try {\r\n            const files = await AddonModDataHelper.getEditTmpFiles(\r\n                inputData,\r\n                this.fieldsArray,\r\n                this.entry?.contents || {},\r\n            );\r\n\r\n            CoreFileUploader.clearTmpFiles(files);\r\n        } finally {\r\n            // Go back to entry list.\r\n            this.forceLeave = true;\r\n            CoreNavigator.back();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Scroll to first error or to the top if not found.\r\n     */\r\n    protected scrollToFirstError(): void {\r\n        if (!CoreDomUtils.scrollToElementBySelector(this.formElement.nativeElement, this.content, '.addon-data-error')) {\r\n            this.content?.scrollToTop();\r\n        }\r\n    }\r\n\r\n}\r\n","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, OnDestroy, ViewChild, ChangeDetectorRef, OnInit, Type } from '@angular/core';\r\nimport { CoreCommentsCommentsComponent } from '@features/comments/components/comments/comments';\r\nimport { CoreComments } from '@features/comments/services/comments';\r\nimport { CoreCourse } from '@features/course/services/course';\r\nimport { CoreCourseModule } from '@features/course/services/course-helper';\r\nimport { CoreRatingInfo } from '@features/rating/services/rating';\r\nimport { IonContent, IonRefresher } from '@ionic/angular';\r\nimport { CoreGroups, CoreGroupInfo } from '@services/groups';\r\nimport { CoreNavigator } from '@services/navigator';\r\nimport { CoreSites } from '@services/sites';\r\nimport { CoreDomUtils } from '@services/utils/dom';\r\nimport { CoreUtils } from '@services/utils/utils';\r\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\r\nimport { AddonModDataComponentsCompileModule } from '../../components/components-compile.module';\r\nimport { AddonModDataProvider,\r\n    AddonModData,\r\n    AddonModDataData,\r\n    AddonModDataGetDataAccessInformationWSResponse,\r\n    AddonModDataField,\r\n    AddonModDataTemplateType,\r\n    AddonModDataTemplateMode,\r\n    AddonModDataEntry,\r\n} from '../../services/data';\r\nimport { AddonModDataHelper } from '../../services/data-helper';\r\nimport { AddonModDataSyncProvider } from '../../services/data-sync';\r\n\r\n/**\r\n * Page that displays the view entry page.\r\n */\r\n@Component({\r\n    selector: 'page-addon-mod-data-entry',\r\n    templateUrl: 'entry.html',\r\n    styleUrls: ['../../data.scss'],\r\n})\r\nexport class AddonModDataEntryPage implements OnInit, OnDestroy {\r\n\r\n    @ViewChild(IonContent) content?: IonContent;\r\n    @ViewChild(CoreCommentsCommentsComponent) comments?: CoreCommentsCommentsComponent;\r\n\r\n    protected entryId?: number;\r\n    protected syncObserver: CoreEventObserver; // It will observe the sync auto event.\r\n    protected entryChangedObserver: CoreEventObserver; // It will observe the changed entry event.\r\n    protected fields: Record<number, AddonModDataField> = {};\r\n    protected fieldsArray: AddonModDataField[] = [];\r\n\r\n    module!: CoreCourseModule;\r\n    courseId!: number;\r\n    offset?: number;\r\n    title = '';\r\n    moduleName = 'data';\r\n    component = AddonModDataProvider.COMPONENT;\r\n    entryLoaded = false;\r\n    renderingEntry = false;\r\n    loadingComments = false;\r\n    loadingRating = false;\r\n    selectedGroup = 0;\r\n    entry?: AddonModDataEntry;\r\n    hasPrevious = false;\r\n    hasNext = false;\r\n    access?: AddonModDataGetDataAccessInformationWSResponse;\r\n    database?: AddonModDataData;\r\n    groupInfo?: CoreGroupInfo;\r\n    showComments = false;\r\n    entryHtml = '';\r\n    siteId: string;\r\n    extraImports: Type<unknown>[] = [AddonModDataComponentsCompileModule];\r\n    jsData?: {\r\n        fields: Record<number, AddonModDataField>;\r\n        entries: Record<number, AddonModDataEntry>;\r\n        database: AddonModDataData;\r\n        module: CoreCourseModule;\r\n        group: number;\r\n    };\r\n\r\n    ratingInfo?: CoreRatingInfo;\r\n    isPullingToRefresh = false; // Whether the last fetching of data was started by a pull-to-refresh action\r\n    commentsEnabled = false;\r\n\r\n    constructor(\r\n        private cdr: ChangeDetectorRef,\r\n    ) {\r\n        this.moduleName = CoreCourse.translateModuleName('data');\r\n        this.siteId = CoreSites.getCurrentSiteId();\r\n\r\n        // Refresh data if this discussion is synchronized automatically.\r\n        this.syncObserver = CoreEvents.on(AddonModDataSyncProvider.AUTO_SYNCED, (data) => {\r\n            if (typeof data.entryId == 'undefined') {\r\n                return;\r\n            }\r\n\r\n            if ((data.entryId == this.entryId || data.offlineEntryId == this.entryId) && this.database?.id == data.dataId) {\r\n                if (data.deleted) {\r\n                    // If deleted, go back.\r\n                    CoreNavigator.back();\r\n                } else {\r\n                    this.entryId = data.entryId;\r\n                    this.entryLoaded = false;\r\n                    this.fetchEntryData(true);\r\n                }\r\n            }\r\n        }, this.siteId);\r\n\r\n        // Refresh entry on change.\r\n        this.entryChangedObserver = CoreEvents.on(AddonModDataProvider.ENTRY_CHANGED, (data) => {\r\n            if (data.entryId == this.entryId && this.database?.id == data.dataId) {\r\n                if (data.deleted) {\r\n                    // If deleted, go back.\r\n                    CoreNavigator.back();\r\n                } else {\r\n                    this.entryLoaded = false;\r\n                    this.fetchEntryData(true);\r\n                }\r\n            }\r\n        }, this.siteId);\r\n    }\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    async ngOnInit(): Promise<void> {\r\n        this.module = CoreNavigator.getRouteParam<CoreCourseModule>('module')!;\r\n        this.entryId = CoreNavigator.getRouteNumberParam('entryId') || undefined;\r\n        this.courseId = CoreNavigator.getRouteNumberParam('courseId')!;\r\n        this.selectedGroup = CoreNavigator.getRouteNumberParam('group') || 0;\r\n        this.offset = CoreNavigator.getRouteNumberParam('offset');\r\n        this.title = this.module.name;\r\n\r\n        this.commentsEnabled = !CoreComments.areCommentsDisabledInSite();\r\n\r\n        await this.fetchEntryData();\r\n        this.logView();\r\n    }\r\n\r\n    /**\r\n     * Fetch the entry data.\r\n     *\r\n     * @param refresh Whether to refresh the current data or not.\r\n     * @param isPtr Whether is a pull to refresh action.\r\n     * @return Resolved when done.\r\n     */\r\n    protected async fetchEntryData(refresh = false, isPtr = false): Promise<void> {\r\n        this.isPullingToRefresh = isPtr;\r\n\r\n        try {\r\n            this.database = await AddonModData.getDatabase(this.courseId, this.module.id);\r\n            this.title = this.database.name || this.title;\r\n\r\n            this.fieldsArray = await AddonModData.getFields(this.database.id, { cmId: this.module.id });\r\n            this.fields = CoreUtils.arrayToObject(this.fieldsArray, 'id');\r\n\r\n            await this.setEntryFromOffset();\r\n\r\n            this.access = await AddonModData.getDatabaseAccessInformation(this.database.id, { cmId: this.module.id });\r\n\r\n            this.groupInfo = await CoreGroups.getActivityGroupInfo(this.database.coursemodule);\r\n            this.selectedGroup = CoreGroups.validateGroupId(this.selectedGroup, this.groupInfo);\r\n\r\n            const actions = AddonModDataHelper.getActions(this.database, this.access, this.entry!);\r\n\r\n            const template = AddonModDataHelper.getTemplate(this.database, AddonModDataTemplateType.SINGLE, this.fieldsArray);\r\n            this.entryHtml = AddonModDataHelper.displayShowFields(\r\n                template,\r\n                this.fieldsArray,\r\n                this.entry!,\r\n                this.offset,\r\n                AddonModDataTemplateMode.SHOW,\r\n                actions,\r\n            );\r\n\r\n            this.showComments = actions.comments;\r\n\r\n            const entries: Record<number, AddonModDataEntry> = {};\r\n            entries[this.entryId!] = this.entry!;\r\n\r\n            // Pass the input data to the component.\r\n            this.jsData = {\r\n                fields: this.fields,\r\n                entries: entries,\r\n                database: this.database,\r\n                module: this.module,\r\n                group: this.selectedGroup,\r\n            };\r\n        } catch (error) {\r\n            if (!refresh) {\r\n                // Some call failed, retry without using cache since it might be a new activity.\r\n                return this.refreshAllData(isPtr);\r\n            }\r\n\r\n            CoreDomUtils.showErrorModalDefault(error, 'core.course.errorgetmodule', true);\r\n        } finally {\r\n            this.content?.scrollToTop();\r\n            this.entryLoaded = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Go to selected entry without changing state.\r\n     *\r\n     * @param offset Entry offset.\r\n     * @return Resolved when done.\r\n     */\r\n    async gotoEntry(offset: number): Promise<void> {\r\n        this.offset = offset;\r\n        this.entryId = undefined;\r\n        this.entry = undefined;\r\n        this.entryLoaded = false;\r\n\r\n        await this.fetchEntryData();\r\n        this.logView();\r\n    }\r\n\r\n    /**\r\n     * Refresh all the data.\r\n     *\r\n     * @param isPtr Whether is a pull to refresh action.\r\n     * @return Promise resolved when done.\r\n     */\r\n    protected async refreshAllData(isPtr?: boolean): Promise<void> {\r\n        const promises: Promise<void>[] = [];\r\n\r\n        promises.push(AddonModData.invalidateDatabaseData(this.courseId));\r\n        if (this.database) {\r\n            promises.push(AddonModData.invalidateEntryData(this.database.id, this.entryId!));\r\n            promises.push(CoreGroups.invalidateActivityGroupInfo(this.database.coursemodule));\r\n            promises.push(AddonModData.invalidateEntriesData(this.database.id));\r\n            promises.push(AddonModData.invalidateFieldsData(this.database.id));\r\n\r\n            if (this.database.comments && this.entry && this.entry.id > 0 && this.commentsEnabled && this.comments) {\r\n                // Refresh comments. Don't add it to promises because we don't want the comments fetch to block the entry fetch.\r\n                this.comments.doRefresh().catch(() => {\r\n                    // Ignore errors.\r\n                });\r\n            }\r\n        }\r\n\r\n        await Promise.all(promises).finally(() =>\r\n            this.fetchEntryData(true, isPtr));\r\n    }\r\n\r\n    /**\r\n     * Refresh the data.\r\n     *\r\n     * @param refresher Refresher.\r\n     * @return Promise resolved when done.\r\n     */\r\n    refreshDatabase(refresher?: IonRefresher): void {\r\n        if (!this.entryLoaded) {\r\n            return;\r\n        }\r\n\r\n        this.refreshAllData(true).finally(() => {\r\n            refresher?.complete();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Set group to see the database.\r\n     *\r\n     * @param groupId Group identifier to set.\r\n     * @return Resolved when done.\r\n     */\r\n    async setGroup(groupId: number): Promise<void> {\r\n        this.selectedGroup = groupId;\r\n        this.offset = undefined;\r\n        this.entry = undefined;\r\n        this.entryId = undefined;\r\n        this.entryLoaded = false;\r\n\r\n        await this.fetchEntryData();\r\n        this.logView();\r\n    }\r\n\r\n    /**\r\n     * Convenience function to fetch the entry and set next/previous entries.\r\n     *\r\n     * @return Resolved when done.\r\n     */\r\n    protected async setEntryFromOffset(): Promise<void> {\r\n        if (typeof this.offset == 'undefined' && typeof this.entryId != 'undefined') {\r\n            // Entry id passed as navigation parameter instead of the offset.\r\n            // We don't display next/previous buttons in this case.\r\n            this.hasNext = false;\r\n            this.hasPrevious = false;\r\n\r\n            const entry = await AddonModDataHelper.fetchEntry(this.database!, this.fieldsArray, this.entryId);\r\n            this.entry = entry.entry;\r\n            this.ratingInfo = entry.ratinginfo;\r\n\r\n            return;\r\n        }\r\n\r\n        const perPage = AddonModDataProvider.PER_PAGE;\r\n        const page = typeof this.offset != 'undefined' && this.offset >= 0\r\n            ? Math.floor(this.offset / perPage)\r\n            : 0;\r\n\r\n        const entries = await AddonModDataHelper.fetchEntries(this.database!, this.fieldsArray, {\r\n            groupId: this.selectedGroup,\r\n            sort: 0,\r\n            order: 'DESC',\r\n            page,\r\n            perPage,\r\n        });\r\n\r\n        const pageEntries = (entries.offlineEntries || []).concat(entries.entries);\r\n\r\n        // Index of the entry when concatenating offline and online page entries.\r\n        let pageIndex = 0;\r\n        if (typeof this.offset == 'undefined') {\r\n            // No offset passed, display the first entry.\r\n            pageIndex = 0;\r\n        } else if (this.offset > 0) {\r\n            // Online entry.\r\n            pageIndex = this.offset % perPage + (entries.offlineEntries?.length || 0);\r\n        } else {\r\n            // Offline entry.\r\n            pageIndex = this.offset + (entries.offlineEntries?.length || 0);\r\n        }\r\n\r\n        this.entry = pageEntries[pageIndex];\r\n        this.entryId = this.entry.id;\r\n\r\n        this.hasPrevious = page > 0 || pageIndex > 0;\r\n\r\n        if (pageIndex + 1 < pageEntries.length) {\r\n            // Not the last entry on the page;\r\n            this.hasNext = true;\r\n        } else if (pageEntries.length < perPage) {\r\n            // Last entry of the last page.\r\n            this.hasNext = false;\r\n        } else {\r\n            // Last entry of the page, check if there are more pages.\r\n            const entries = await AddonModData.getEntries(this.database!.id, {\r\n                groupId: this.selectedGroup,\r\n                page: page + 1,\r\n                perPage: perPage,\r\n            });\r\n            this.hasNext = entries?.entries?.length > 0;\r\n        }\r\n\r\n        if (this.entryId > 0) {\r\n            // Online entry, we need to fetch the the rating info.\r\n            const entry = await AddonModData.getEntry(this.database!.id, this.entryId, { cmId: this.module.id });\r\n            this.ratingInfo = entry.ratinginfo;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Function called when entry is being rendered.\r\n     */\r\n    setRenderingEntry(rendering: boolean): void {\r\n        this.renderingEntry = rendering;\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * Function called when comments component is loading data.\r\n     */\r\n    setLoadingComments(loading: boolean): void {\r\n        this.loadingComments = loading;\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * Function called when rate component is loading data.\r\n     */\r\n    setLoadingRating(loading: boolean): void {\r\n        this.loadingRating = loading;\r\n        this.cdr.detectChanges();\r\n    }\r\n\r\n    /**\r\n     * Function called when rating is updated online.\r\n     */\r\n    ratingUpdated(): void {\r\n        AddonModData.invalidateEntryData(this.database!.id, this.entryId!);\r\n    }\r\n\r\n    /**\r\n     * Log viewing the activity.\r\n     *\r\n     * @return Promise resolved when done.\r\n     */\r\n    protected async logView(): Promise<void> {\r\n        if (!this.database || !this.database.id) {\r\n            return;\r\n        }\r\n\r\n        await CoreUtils.ignoreErrors(AddonModData.logView(this.database.id, this.database.name));\r\n    }\r\n\r\n    /**\r\n     * Component being destroyed.\r\n     */\r\n    ngOnDestroy(): void {\r\n        this.syncObserver?.off();\r\n        this.entryChangedObserver?.off();\r\n    }\r\n\r\n}\r\n","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { CoreCourseModuleMainActivityPage } from '@features/course/classes/main-activity-page';\r\nimport { CoreNavigator } from '@services/navigator';\r\nimport { AddonModDataIndexComponent } from '../../components/index/index';\r\n\r\n/**\r\n * Page that displays a data.\r\n */\r\n@Component({\r\n    selector: 'page-addon-mod-data-index',\r\n    templateUrl: 'index.html',\r\n})\r\nexport class AddonModDataIndexPage extends CoreCourseModuleMainActivityPage<AddonModDataIndexComponent> implements OnInit {\r\n\r\n    @ViewChild(AddonModDataIndexComponent) activityComponent?: AddonModDataIndexComponent;\r\n\r\n    group = 0;\r\n\r\n    /**\r\n     * Component being initialized.\r\n     */\r\n    ngOnInit(): void {\r\n        super.ngOnInit();\r\n        this.group = CoreNavigator.getRouteNumberParam('group') || 0;\r\n    }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}