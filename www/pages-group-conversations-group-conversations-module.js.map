{"version":3,"sources":["./src/addons/messages/pages/group-conversations/group-conversations.html","./src/addons/messages/pages/group-conversations/group-conversations.module.ts","./src/addons/messages/pages/group-conversations/group-conversations.page.ts"],"names":[],"mappings":"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","file":"pages-group-conversations-group-conversations-module.js","sourcesContent":["export default \"<ion-header>\\r\\n    <ion-toolbar>\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n        <h1>{{ 'addon.messages.messages' | translate }}</h1>\\r\\n        <ion-buttons slot=\\\"end\\\">\\r\\n            <ion-button fill=\\\"clear\\\" (click)=\\\"gotoSearch()\\\" [attr.aria-label]=\\\"'addon.messages.searchcombined' | translate\\\">\\r\\n                <ion-icon name=\\\"fas-search\\\" slot=\\\"icon-only\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n            </ion-button>\\r\\n            <ion-button (click)=\\\"gotoSettings()\\\" [attr.aria-label]=\\\"'addon.messages.messagepreferences' | translate\\\">\\r\\n                <ion-icon name=\\\"fas-cog\\\" slot=\\\"icon-only\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n            </ion-button>\\r\\n            <!-- Add an empty context menu so discussion page can add items in split view,\\r\\n                otherwise the menu disappears in some cases. -->\\r\\n            <core-context-menu></core-context-menu>\\r\\n        </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n    <core-split-view>\\r\\n        <ion-refresher slot=\\\"fixed\\\" [disabled]=\\\"!loaded || !currentListEl\\\" (ionRefresh)=\\\"refreshData($event.target)\\\">\\r\\n            <ion-refresher-content pullingText=\\\"{{ 'core.pulltorefresh' | translate }}\\\"></ion-refresher-content>\\r\\n        </ion-refresher>\\r\\n\\r\\n        <core-loading [hideUntil]=\\\"loaded\\\" [message]=\\\"loadingMessage\\\">\\r\\n            <ion-list>\\r\\n                <ion-item class=\\\"ion-text-wrap addon-message-discussion\\\" (click)=\\\"gotoContacts()\\\" detail=\\\"true\\\" button>\\r\\n                    <ion-icon name=\\\"fas-address-book\\\" slot=\\\"start\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                    <ion-label><h2>{{ 'addon.messages.contacts' | translate }}</h2></ion-label>\\r\\n                    <ion-badge *ngIf=\\\"contactRequestsCount > 0\\\" slot=\\\"end\\\" aria-hidden=\\\"true\\\">{{contactRequestsCount}}</ion-badge>\\r\\n                    <span *ngIf=\\\"contactRequestsCount > 0\\\" class=\\\"sr-only\\\">\\r\\n                        {{ 'addon.messages.pendingcontactrequests' | translate:{$a: contactRequestsCount} }}\\r\\n                    </span>\\r\\n                </ion-item>\\r\\n                <!-- Favourite conversations. -->\\r\\n                <ion-item\\r\\n                    button\\r\\n                    class=\\\"ion-text-wrap divider\\\"\\r\\n                    (click)=\\\"toggle(favourites)\\\"\\r\\n                    sticky=\\\"true\\\"\\r\\n                    [attr.aria-label]=\\\"(favourites.expanded ? 'core.collapse' : 'core.expand') | translate\\\"\\r\\n                    [attr.aria-expanded]=\\\"favourites.expanded\\\"\\r\\n                    aria-controls=\\\"addon-messages-groupconversations-favourite\\\"\\r\\n                    role=\\\"heading\\\"\\r\\n                    detail=\\\"false\\\"\\r\\n                >\\r\\n                    <ion-icon *ngIf=\\\"!favourites.expanded\\\" name=\\\"fas-caret-right\\\" flip-rtl slot=\\\"start\\\" aria-hidden=\\\"true\\\">\\r\\n                    </ion-icon>\\r\\n                    <ion-icon *ngIf=\\\"favourites.expanded\\\" name=\\\"fas-caret-down\\\" slot=\\\"start\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                    <ion-label><h2>{{ 'core.favourites' | translate }} ({{ favourites.count }})</h2></ion-label>\\r\\n                    <ion-badge slot=\\\"end\\\" *ngIf=\\\"favourites.unread\\\" aria-hidden=\\\"true\\\">{{ favourites.unread }}</ion-badge>\\r\\n                    <span *ngIf=\\\"favourites.unread\\\" class=\\\"sr-only\\\">\\r\\n                        {{ 'addon.messages.unreadconversations' | translate:{$a: favourites.unread} }}\\r\\n                    </span>\\r\\n                </ion-item>\\r\\n                <div [hidden]=\\\"!favourites.conversations || !favourites.expanded || favourites.loading\\\" #favlist\\r\\n                    id=\\\"addon-messages-groupconversations-favourite\\\">\\r\\n                    <ng-container *ngTemplateOutlet=\\\"conversationsTemplate; context: {conversations: favourites.conversations}\\\">\\r\\n                    </ng-container>\\r\\n                    <!-- The infinite loading cannot be inside the ng-template, it fails because it doesn't find ion-content. -->\\r\\n                    <core-infinite-loading [enabled]=\\\"favourites.canLoadMore\\\" (action)=\\\"loadMoreConversations(favourites, $event)\\\"\\r\\n                        [error]=\\\"favourites.loadMoreError\\\"></core-infinite-loading>\\r\\n                    <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"favourites.conversations && favourites.conversations.length == 0\\\">\\r\\n                        <ion-label><p>{{ 'addon.messages.nofavourites' | translate }}</p></ion-label>\\r\\n                    </ion-item>\\r\\n                </div>\\r\\n                <ion-item class=\\\"ion-text-center\\\" *ngIf=\\\"favourites.loading\\\">\\r\\n                    <ion-label><ion-spinner [attr.aria-label]=\\\"'core.loading' | translate\\\"></ion-spinner></ion-label>\\r\\n                </ion-item>\\r\\n\\r\\n                <!-- Group conversations. -->\\r\\n                <ion-item\\r\\n                    button\\r\\n                    class=\\\"divider ion-text-wrap\\\"\\r\\n                    (click)=\\\"toggle(group)\\\"\\r\\n                    sticky=\\\"true\\\"\\r\\n                    [attr.aria-label]=\\\"(group.expanded ? 'core.collapse' : 'core.expand') | translate\\\"\\r\\n                    [attr.aria-expanded]=\\\"group.expanded\\\"\\r\\n                    aria-controls=\\\"addon-messages-groupconversations-group\\\"\\r\\n                    role=\\\"heading\\\"\\r\\n                    detail=\\\"false\\\"\\r\\n                >\\r\\n                    <ion-icon *ngIf=\\\"!group.expanded\\\" name=\\\"fas-caret-right\\\" flip-rtl slot=\\\"start\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                    <ion-icon *ngIf=\\\"group.expanded\\\" name=\\\"fas-caret-down\\\" slot=\\\"start\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                    <ion-label><h2>{{ 'addon.messages.groupconversations' | translate }} ({{ group.count }})</h2></ion-label>\\r\\n                    <ion-badge slot=\\\"end\\\" *ngIf=\\\"group.unread\\\" aria-hidden=\\\"true\\\">{{ group.unread }}</ion-badge>\\r\\n                    <span *ngIf=\\\"group.unread\\\" class=\\\"sr-only\\\">\\r\\n                        {{ 'addon.messages.unreadconversations' | translate:{$a: group.unread} }}\\r\\n                    </span>\\r\\n                </ion-item>\\r\\n                <div [hidden]=\\\"!group.conversations || !group.expanded || group.loading\\\" #grouplist\\r\\n                    id=\\\"addon-messages-groupconversations-group\\\">\\r\\n                    <ng-container *ngTemplateOutlet=\\\"conversationsTemplate; context: {conversations: group.conversations}\\\">\\r\\n                    </ng-container>\\r\\n                    <!-- The infinite loading cannot be inside the ng-template, it fails because it doesn't find ion-content. -->\\r\\n                    <core-infinite-loading [enabled]=\\\"group.canLoadMore\\\" (action)=\\\"loadMoreConversations(group, $event)\\\"\\r\\n                        [error]=\\\"group.loadMoreError\\\"></core-infinite-loading>\\r\\n                    <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"group.conversations && group.conversations.length == 0\\\">\\r\\n                        <ion-label><p>{{ 'addon.messages.nogroupconversations' | translate }}</p></ion-label>\\r\\n                    </ion-item>\\r\\n                </div>\\r\\n                <ion-item class=\\\"ion-text-center\\\" *ngIf=\\\"group.loading\\\">\\r\\n                    <ion-label><ion-spinner [attr.aria-label]=\\\"'core.loading' | translate\\\"></ion-spinner></ion-label>\\r\\n                </ion-item>\\r\\n\\r\\n                <ion-item\\r\\n                    button\\r\\n                    class=\\\"divider ion-text-wrap\\\"\\r\\n                    (click)=\\\"toggle(individual)\\\"\\r\\n                    sticky=\\\"true\\\"\\r\\n                    [attr.aria-label]=\\\"(individual.expanded ? 'core.collapse' : 'core.expand') | translate\\\"\\r\\n                    [attr.aria-expanded]=\\\"individual.expanded\\\"\\r\\n                    aria-controls=\\\"addon-messages-groupconversations-individual\\\"\\r\\n                    role=\\\"heading\\\"\\r\\n                    detail=\\\"false\\\"\\r\\n                >\\r\\n                    <ion-icon *ngIf=\\\"!individual.expanded\\\" name=\\\"fas-caret-right\\\" flip-rtl slot=\\\"start\\\" aria-hidden=\\\"true\\\">\\r\\n                    </ion-icon>\\r\\n                    <ion-icon *ngIf=\\\"individual.expanded\\\" name=\\\"fas-caret-down\\\" slot=\\\"start\\\" aria-hidden=\\\"true\\\"></ion-icon>\\r\\n                    <ion-label>\\r\\n                        <h2>{{ 'addon.messages.individualconversations' | translate }} ({{ individual.count }})</h2>\\r\\n                    </ion-label>\\r\\n                    <ion-badge slot=\\\"end\\\" *ngIf=\\\"individual.unread\\\" aria-hidden=\\\"true\\\">{{ individual.unread }}</ion-badge>\\r\\n                    <span *ngIf=\\\"individual.unread\\\" class=\\\"sr-only\\\">\\r\\n                        {{ 'addon.messages.unreadconversations' | translate:{$a: individual.unread} }}\\r\\n                    </span>\\r\\n                </ion-item>\\r\\n                <div [hidden]=\\\"!individual.conversations || !individual.expanded || individual.loading\\\" #indlist\\r\\n                    id=\\\"addon-messages-groupconversations-individual\\\">\\r\\n                    <ng-container *ngTemplateOutlet=\\\"conversationsTemplate; context: {conversations: individual.conversations}\\\">\\r\\n                    </ng-container>\\r\\n                    <!-- The infinite loading cannot be inside the ng-template, it fails because it doesn't find ion-content. -->\\r\\n                    <core-infinite-loading [enabled]=\\\"individual.canLoadMore\\\" (action)=\\\"loadMoreConversations(individual, $event)\\\"\\r\\n                        [error]=\\\"individual.loadMoreError\\\"></core-infinite-loading>\\r\\n                    <ion-item class=\\\"ion-text-wrap\\\" *ngIf=\\\"individual.conversations && individual.conversations.length == 0\\\">\\r\\n                        <ion-label><p>{{ 'addon.messages.noindividualconversations' | translate }}</p></ion-label>\\r\\n                    </ion-item>\\r\\n                </div>\\r\\n                <ion-item class=\\\"ion-text-center\\\" *ngIf=\\\"individual.loading\\\">\\r\\n                    <ion-label><ion-spinner [attr.aria-label]=\\\"'core.loading' | translate\\\"></ion-spinner></ion-label>\\r\\n                </ion-item>\\r\\n\\r\\n            </ion-list>\\r\\n        </core-loading>\\r\\n    </core-split-view>\\r\\n</ion-content>\\r\\n\\r\\n<!-- Template to render a list of conversations. -->\\r\\n<ng-template #conversationsTemplate let-conversations=\\\"conversations\\\">\\r\\n    <ion-item class=\\\"ion-text-wrap addon-message-discussion\\\" *ngFor=\\\"let conversation of conversations\\\" button detail=\\\"false\\\"\\r\\n        [attr.aria-label]=\\\"conversation.name\\\" (click)=\\\"gotoConversation(conversation.id, conversation.userid)\\\"\\r\\n        [attr.aria-current]=\\\"((conversation.id && conversation.id == selectedConversationId) ||\\r\\n            (conversation.userid && conversation.userid == selectedUserId)) ? 'page': 'false'\\\"\\r\\n        id=\\\"addon-message-conversation-{{ conversation.id ? conversation.id : 'user-' + conversation.userid }}\\\">\\r\\n        <!-- Group conversation image. -->\\r\\n        <ion-avatar slot=\\\"start\\\" *ngIf=\\\"conversation.type == typeGroup\\\">\\r\\n            <img [src]=\\\"conversation.imageurl\\\" [alt]=\\\"conversation.name\\\" core-external-content\\r\\n            onError=\\\"this.src='assets/img/group-avatar.png'\\\">\\r\\n        </ion-avatar>\\r\\n\\r\\n        <!-- Avatar for individual conversations. -->\\r\\n        <core-user-avatar *ngIf=\\\"conversation.type != typeGroup\\\" core-user-avatar [user]=\\\"conversation.otherUser\\\"\\r\\n            [linkProfile]=\\\"false\\\" [checkOnline]=\\\"conversation.showonlinestatus\\\" slot=\\\"start\\\"></core-user-avatar>\\r\\n\\r\\n        <ion-label>\\r\\n            <div class=\\\"flex-row ion-justify-content-between\\\">\\r\\n                <p class=\\\"item-heading\\\">\\r\\n                    <core-format-text [text]=\\\"conversation.name\\\" contextLevel=\\\"system\\\" [contextInstanceId]=\\\"0\\\"></core-format-text>\\r\\n                    <ion-icon name=\\\"fas-user-slash\\\" *ngIf=\\\"conversation.isblocked\\\"\\r\\n                        [title]=\\\"'addon.messages.contactblocked' | translate\\\"></ion-icon>\\r\\n                    <ion-icon *ngIf=\\\"conversation.ismuted\\\" name=\\\"fas-volume-mute\\\"\\r\\n                        [title]=\\\"'addon.messages.mutedconversation' | translate\\\"></ion-icon>\\r\\n                </p>\\r\\n                <ion-note *ngIf=\\\"conversation.lastmessagedate > 0 || conversation.unreadcount\\\">\\r\\n                    <span *ngIf=\\\"conversation.lastmessagedate > 0\\\" class=\\\"addon-message-last-message-date\\\">\\r\\n                        {{conversation.lastmessagedate | coreDateDayOrTime}}\\r\\n                    </span>\\r\\n                    <ion-badge *ngIf=\\\"conversation.unreadcount > 0\\\" aria-label=\\\"true\\\">{{ conversation.unreadcount }}</ion-badge>\\r\\n                    <span *ngIf=\\\"conversation.unreadcount > 0\\\" class=\\\"sr-only\\\">\\r\\n                        {{ 'addon.messages.unreadmessages' | translate:{$a: conversation.unreadcount} }}\\r\\n                    </span>\\r\\n                </ion-note>\\r\\n            </div>\\r\\n            <p *ngIf=\\\"conversation.subname\\\"><core-format-text [text]=\\\"conversation.subname\\\" contextLevel=\\\"system\\\"\\r\\n                [contextInstanceId]=\\\"0\\\"></core-format-text></p>\\r\\n            <p class=\\\"addon-message-last-message\\\">\\r\\n                <span *ngIf=\\\"conversation.sentfromcurrentuser\\\" class=\\\"addon-message-last-message-user\\\">\\r\\n                    {{ 'addon.messages.you' | translate }}\\r\\n                </span>\\r\\n                <span *ngIf=\\\"!conversation.sentfromcurrentuser && conversation.type == typeGroup && conversation.members[0]\\\"\\r\\n                    class=\\\"addon-message-last-message-user\\\">{{ conversation.members[0].fullname + ':' }}</span>\\r\\n                <core-format-text clean=\\\"true\\\" singleLine=\\\"true\\\" [text]=\\\"conversation.lastmessage\\\"\\r\\n                    class=\\\"addon-message-last-message-text\\\" contextLevel=\\\"system\\\" [contextInstanceId]=\\\"0\\\"></core-format-text>\\r\\n            </p>\\r\\n        </ion-label>\\r\\n    </ion-item>\\r\\n</ng-template>\\r\\n\";","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { conditionalRoutes } from '@/app/app-routing.module';\r\nimport { AddonMessagesDiscussionRoute } from '@addons/messages/messages-lazy.module';\r\nimport { CoreScreen } from '@services/screen';\r\n\r\nimport { CoreSharedModule } from '@/core/shared.module';\r\n\r\nimport { AddonMessagesGroupConversationsPage } from './group-conversations.page';\r\nimport { AddonMessagesMainMenuHandlerService } from '@addons/messages/services/handlers/mainmenu';\r\n\r\nconst mobileRoutes: Routes = [\r\n    {\r\n        path: '',\r\n        data: {\r\n            mainMenuTabRoot: AddonMessagesMainMenuHandlerService.PAGE_NAME,\r\n        },\r\n        component: AddonMessagesGroupConversationsPage,\r\n    },\r\n    AddonMessagesDiscussionRoute,\r\n];\r\n\r\nconst tabletRoutes: Routes = [\r\n    {\r\n        path: '',\r\n        data: {\r\n            mainMenuTabRoot: AddonMessagesMainMenuHandlerService.PAGE_NAME,\r\n        },\r\n        component: AddonMessagesGroupConversationsPage,\r\n        children: [\r\n            AddonMessagesDiscussionRoute,\r\n        ],\r\n    },\r\n];\r\n\r\nconst routes: Routes = [\r\n    ...conditionalRoutes(mobileRoutes, () => CoreScreen.isMobile),\r\n    ...conditionalRoutes(tabletRoutes, () => CoreScreen.isTablet),\r\n];\r\n\r\n@NgModule({\r\n    imports: [\r\n        RouterModule.forChild(routes),\r\n        CoreSharedModule,\r\n    ],\r\n    declarations: [\r\n        AddonMessagesGroupConversationsPage,\r\n    ],\r\n    exports: [RouterModule],\r\n})\r\nexport class AddonMessagesGroupConversationsPageModule {}\r\n","// (C) Copyright 2015 Moodle Pty Ltd.\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, OnInit, OnDestroy, ViewChild, ElementRef } from '@angular/core';\r\nimport { IonContent, IonRefresher } from '@ionic/angular';\r\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\r\nimport { CoreSites } from '@services/sites';\r\nimport {\r\n    AddonMessagesProvider,\r\n    AddonMessagesConversationFormatted,\r\n    AddonMessages,\r\n    AddonMessagesNewMessagedEventData,\r\n} from '../../services/messages';\r\nimport {\r\n    AddonMessagesOffline,\r\n    AddonMessagesOfflineAnyMessagesFormatted,\r\n} from '../../services/messages-offline';\r\nimport { CoreDomUtils } from '@services/utils/dom';\r\nimport { CoreUser } from '@features/user/services/user';\r\nimport { CorePushNotificationsDelegate } from '@features/pushnotifications/services/push-delegate';\r\nimport { Platform, Translate } from '@singletons';\r\nimport { Subscription } from 'rxjs';\r\nimport { CorePushNotificationsNotificationBasicData } from '@features/pushnotifications/services/pushnotifications';\r\nimport { ActivatedRoute, Params } from '@angular/router';\r\nimport { CoreUtils } from '@services/utils/utils';\r\nimport { CoreNavigator } from '@services/navigator';\r\nimport { CoreScreen } from '@services/screen';\r\n\r\n/**\r\n * Page that displays the list of conversations, including group conversations.\r\n */\r\n@Component({\r\n    selector: 'page-addon-messages-group-conversations',\r\n    templateUrl: 'group-conversations.html',\r\n    styleUrls: ['../../messages-common.scss'],\r\n})\r\nexport class AddonMessagesGroupConversationsPage implements OnInit, OnDestroy {\r\n\r\n    @ViewChild(IonContent) content?: IonContent;\r\n    @ViewChild('favlist') favListEl?: ElementRef;\r\n    @ViewChild('grouplist') groupListEl?: ElementRef;\r\n    @ViewChild('indlist') indListEl?: ElementRef;\r\n\r\n    loaded = false;\r\n    loadingMessage: string;\r\n    selectedConversationId?: number;\r\n    selectedUserId?: number;\r\n    contactRequestsCount = 0;\r\n    favourites: AddonMessagesGroupConversationOption = {\r\n        type: undefined,\r\n        favourites: true,\r\n        count: 0,\r\n        unread: 0,\r\n        conversations: [],\r\n    };\r\n\r\n    group: AddonMessagesGroupConversationOption = {\r\n        type: AddonMessagesProvider.MESSAGE_CONVERSATION_TYPE_GROUP,\r\n        favourites: false,\r\n        count: 0,\r\n        unread: 0,\r\n        conversations: [],\r\n    };\r\n\r\n    individual: AddonMessagesGroupConversationOption = {\r\n        type: AddonMessagesProvider.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL,\r\n        favourites: false,\r\n        count: 0,\r\n        unread: 0,\r\n        conversations: [],\r\n    };\r\n\r\n    typeGroup = AddonMessagesProvider.MESSAGE_CONVERSATION_TYPE_GROUP;\r\n    currentListEl?: HTMLElement;\r\n\r\n    protected siteId: string;\r\n    protected currentUserId: number;\r\n    protected newMessagesObserver: CoreEventObserver;\r\n    protected pushObserver: Subscription;\r\n    protected appResumeSubscription: Subscription;\r\n    protected readChangedObserver: CoreEventObserver;\r\n    protected cronObserver: CoreEventObserver;\r\n    protected openConversationObserver: CoreEventObserver;\r\n    protected updateConversationListObserver: CoreEventObserver;\r\n    protected contactRequestsCountObserver: CoreEventObserver;\r\n    protected memberInfoObserver: CoreEventObserver;\r\n\r\n    constructor(\r\n        protected route: ActivatedRoute,\r\n    ) {\r\n        this.loadingMessage = Translate.instant('core.loading');\r\n        this.siteId = CoreSites.getCurrentSiteId();\r\n        this.currentUserId = CoreSites.getCurrentSiteUserId();\r\n\r\n        // Update conversations when new message is received.\r\n        this.newMessagesObserver = CoreEvents.on(\r\n            AddonMessagesProvider.NEW_MESSAGE_EVENT,\r\n            (data) => {\r\n            // Check if the new message belongs to the option that is currently expanded.\r\n                const expandedOption = this.getExpandedOption();\r\n                const messageOption = this.getConversationOption(data);\r\n\r\n                if (expandedOption != messageOption) {\r\n                    return; // Message doesn't belong to current list, stop.\r\n                }\r\n\r\n                // Search the conversation to update.\r\n                const conversation = this.findConversation(data.conversationId, data.userId, expandedOption);\r\n\r\n                if (typeof conversation == 'undefined') {\r\n                // Probably a new conversation, refresh the list.\r\n                    this.loaded = false;\r\n                    this.refreshData().finally(() => {\r\n                        this.loaded = true;\r\n                    });\r\n\r\n                    return;\r\n                }\r\n                if (conversation.lastmessage != data.message || conversation.lastmessagedate != data.timecreated / 1000) {\r\n                    const isNewer = data.timecreated / 1000 > (conversation.lastmessagedate || 0);\r\n\r\n                    // An existing conversation has a new message, update the last message.\r\n                    conversation.lastmessage = data.message;\r\n                    conversation.lastmessagedate = data.timecreated / 1000;\r\n\r\n                    // Sort the affected list.\r\n                    const option = this.getConversationOption(conversation);\r\n                    option.conversations = AddonMessages.sortConversations(option.conversations || []);\r\n\r\n                    if (isNewer) {\r\n                    // The last message is newer than the previous one, scroll to top to keep viewing the conversation.\r\n                        this.content?.scrollToTop();\r\n                    }\r\n                }\r\n            },\r\n            this.siteId,\r\n        );\r\n\r\n        // Update conversations when a message is read.\r\n        this.readChangedObserver = CoreEvents.on(AddonMessagesProvider.READ_CHANGED_EVENT, (data) => {\r\n            if (data.conversationId) {\r\n                const conversation = this.findConversation(data.conversationId);\r\n\r\n                if (typeof conversation != 'undefined') {\r\n                    // A conversation has been read reset counter.\r\n                    conversation.unreadcount = 0;\r\n\r\n                    // Conversations changed, invalidate them and refresh unread counts.\r\n                    AddonMessages.invalidateConversations(this.siteId);\r\n                    AddonMessages.refreshUnreadConversationCounts(this.siteId);\r\n                }\r\n            }\r\n        }, this.siteId);\r\n\r\n        // Load a discussion if we receive an event to do so.\r\n        this.openConversationObserver = CoreEvents.on(\r\n            AddonMessagesProvider.OPEN_CONVERSATION_EVENT,\r\n            (data) => {\r\n                if (data.conversationId || data.userId) {\r\n                    this.gotoConversation(data.conversationId, data.userId);\r\n                }\r\n            },\r\n            this.siteId,\r\n        );\r\n\r\n        // Refresh the view when the app is resumed.\r\n        this.appResumeSubscription = Platform.resume.subscribe(() => {\r\n            if (!this.loaded) {\r\n                return;\r\n            }\r\n            this.loaded = false;\r\n            this.refreshData().finally(() => {\r\n                this.loaded = true;\r\n            });\r\n        });\r\n\r\n        // Update conversations if we receive an event to do so.\r\n        this.updateConversationListObserver = CoreEvents.on(\r\n            AddonMessagesProvider.UPDATE_CONVERSATION_LIST_EVENT,\r\n            (data) => {\r\n                if (data && data.action == 'mute') {\r\n                // If the conversation is displayed, change its muted value.\r\n                    const expandedOption = this.getExpandedOption();\r\n\r\n                    if (expandedOption && expandedOption.conversations) {\r\n                        const conversation = this.findConversation(data.conversationId, undefined, expandedOption);\r\n                        if (conversation) {\r\n                            conversation.ismuted = !!data.value;\r\n                        }\r\n                    }\r\n\r\n                    return;\r\n                }\r\n\r\n                this.refreshData();\r\n\r\n            },\r\n            this.siteId,\r\n        );\r\n\r\n        // If a message push notification is received, refresh the view.\r\n        this.pushObserver = CorePushNotificationsDelegate.on<CorePushNotificationsNotificationBasicData>('receive')\r\n            .subscribe((notification) => {\r\n                // New message received. If it's from current site, refresh the data.\r\n                if (CoreUtils.isFalseOrZero(notification.notif) && notification.site == this.siteId) {\r\n                // Don't refresh unread counts, it's refreshed from the main menu handler in this case.\r\n                    this.refreshData(undefined, false);\r\n                }\r\n            });\r\n\r\n        // Update unread conversation counts.\r\n        this.cronObserver = CoreEvents.on(\r\n            AddonMessagesProvider.UNREAD_CONVERSATION_COUNTS_EVENT,\r\n            (data) => {\r\n                this.favourites.unread = data.favourites;\r\n                this.individual.unread = data.individual + data.self; // Self is only returned if it's not favourite.\r\n                this.group.unread = data.group;\r\n            },\r\n            this.siteId,\r\n        );\r\n\r\n        // Update the contact requests badge.\r\n        this.contactRequestsCountObserver = CoreEvents.on(\r\n            AddonMessagesProvider.CONTACT_REQUESTS_COUNT_EVENT,\r\n            (data) => {\r\n                this.contactRequestsCount = data.count;\r\n            },\r\n            this.siteId,\r\n        );\r\n\r\n        // Update block status of a user.\r\n        this.memberInfoObserver = CoreEvents.on(\r\n            AddonMessagesProvider.MEMBER_INFO_CHANGED_EVENT,\r\n            (data) => {\r\n                if (!data.userBlocked && !data.userUnblocked) {\r\n                // The block status has not changed, ignore.\r\n                    return;\r\n                }\r\n\r\n                const expandedOption = this.getExpandedOption();\r\n                if (expandedOption == this.individual || expandedOption == this.favourites) {\r\n                    if (!expandedOption.conversations || expandedOption.conversations.length <= 0) {\r\n                        return;\r\n                    }\r\n\r\n                    const conversation = this.findConversation(undefined, data.userId, expandedOption);\r\n                    if (conversation) {\r\n                        conversation.isblocked = data.userBlocked;\r\n                    }\r\n                }\r\n            },\r\n            this.siteId,\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Component loaded.\r\n     */\r\n    async ngOnInit(): Promise<void> {\r\n        this.route.queryParams.subscribe(async (params) => {\r\n            // When a child page loads this callback is triggered too.\r\n            const conversationId =CoreNavigator.getRouteNumberParam('conversationId', { params });\r\n            const userId = CoreNavigator.getRouteNumberParam('userId', { params });\r\n            if (conversationId || userId) {\r\n                // Update the selected ones.\r\n                this.selectedConversationId = conversationId;\r\n                this.selectedUserId = userId;\r\n            }\r\n        });\r\n\r\n        await this.fetchData();\r\n\r\n        if (!this.selectedConversationId && !this.selectedUserId && CoreScreen.isTablet) {\r\n            // Load the first conversation.\r\n            let conversation: AddonMessagesConversationForList;\r\n            const expandedOption = this.getExpandedOption();\r\n\r\n            if (expandedOption && expandedOption.conversations.length) {\r\n                conversation = expandedOption.conversations[0];\r\n\r\n                if (conversation) {\r\n                    this.gotoConversation(conversation.id);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Fetch conversations.\r\n     *\r\n     * @param refreshUnreadCounts Whether to refresh unread counts.\r\n     * @return Promise resolved when done.\r\n     */\r\n    protected async fetchData(refreshUnreadCounts: boolean = true): Promise<void> {\r\n        // Load the amount of conversations and contact requests.\r\n        const promises: Promise<unknown>[] = [];\r\n\r\n        promises.push(this.fetchConversationCounts());\r\n\r\n        // View updated by the events observers.\r\n        promises.push(AddonMessages.getContactRequestsCount(this.siteId));\r\n        if (refreshUnreadCounts) {\r\n            promises.push(AddonMessages.refreshUnreadConversationCounts(this.siteId));\r\n        }\r\n\r\n        try {\r\n            await Promise.all(promises);\r\n\r\n            // The expanded status hasn't been initialized. Do it now.\r\n            if (typeof this.favourites.expanded == 'undefined' && (this.selectedConversationId || this.selectedUserId)) {\r\n                // A certain conversation should be opened.\r\n                // We don't know which option it belongs to, so we need to fetch the data for all of them.\r\n                const promises: Promise<void>[] = [];\r\n\r\n                promises.push(this.fetchDataForOption(this.favourites, false));\r\n                promises.push(this.fetchDataForOption(this.group, false));\r\n                promises.push(this.fetchDataForOption(this.individual, false));\r\n\r\n                await Promise.all(promises);\r\n                // All conversations have been loaded, find the one we need to load and expand its option.\r\n                const conversation = this.findConversation(this.selectedConversationId, this.selectedUserId);\r\n                if (conversation) {\r\n                    const option = this.getConversationOption(conversation);\r\n\r\n                    await this.expandOption(option);\r\n\r\n                    this.loaded = true;\r\n\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Load the data for the expanded option.\r\n            await this.fetchDataForExpandedOption();\r\n        } catch (error) {\r\n            CoreDomUtils.showErrorModalDefault(error, 'addon.messages.errorwhileretrievingdiscussions', true);\r\n        }\r\n        this.loaded = true;\r\n    }\r\n\r\n    /**\r\n     * Fetch data for the expanded option.\r\n     *\r\n     * @return Promise resolved when done.\r\n     */\r\n    protected async fetchDataForExpandedOption(): Promise<void> {\r\n        if (typeof this.favourites.expanded == 'undefined') {\r\n            // Calculate which option should be expanded initially.\r\n            this.favourites.expanded = this.favourites.count != 0 && !this.group.unread && !this.individual.unread;\r\n            this.group.expanded = !this.favourites.expanded && this.group.count != 0 && !this.individual.unread;\r\n            this.individual.expanded = !this.favourites.expanded && !this.group.expanded;\r\n        }\r\n\r\n        this.loadCurrentListElement();\r\n\r\n        const expandedOption = this.getExpandedOption();\r\n\r\n        if (expandedOption) {\r\n            await this.fetchDataForOption(expandedOption, false);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Fetch data for a certain option.\r\n     *\r\n     * @param option The option to fetch data for.\r\n     * @param loadingMore Whether we are loading more data or just the first ones.\r\n     * @param getCounts Whether to get counts data.\r\n     * @return Promise resolved when done.\r\n     */\r\n    async fetchDataForOption(\r\n        option: AddonMessagesGroupConversationOption,\r\n        loadingMore = false,\r\n        getCounts = false,\r\n    ): Promise<void> {\r\n        option.loadMoreError = false;\r\n\r\n        const limitFrom = loadingMore ? option.conversations.length : 0;\r\n        const promises: Promise<unknown>[] = [];\r\n\r\n        let data = {\r\n            conversations: <AddonMessagesConversationForList[]> [],\r\n            canLoadMore: false,\r\n        };\r\n        let offlineMessages:\r\n        AddonMessagesOfflineAnyMessagesFormatted[] = [];\r\n\r\n        // Get the conversations and, if needed, the offline messages. Always try to get the latest data.\r\n        promises.push(AddonMessages.invalidateConversations(this.siteId).then(async () => {\r\n            data = await AddonMessages.getConversations(option.type, option.favourites, limitFrom, this.siteId);\r\n\r\n            return;\r\n        }));\r\n\r\n        if (!loadingMore) {\r\n            promises.push(AddonMessagesOffline.getAllMessages().then((messages) => {\r\n                offlineMessages = messages;\r\n\r\n                return;\r\n            }));\r\n        }\r\n\r\n        if (getCounts) {\r\n            promises.push(this.fetchConversationCounts());\r\n            promises.push(AddonMessages.refreshUnreadConversationCounts(this.siteId));\r\n        }\r\n\r\n        await Promise.all(promises);\r\n\r\n        if (loadingMore) {\r\n            option.conversations = option.conversations.concat(data.conversations);\r\n            option.canLoadMore = data.canLoadMore;\r\n        } else {\r\n            option.conversations = data.conversations;\r\n            option.canLoadMore = data.canLoadMore;\r\n\r\n            if (offlineMessages && offlineMessages.length) {\r\n                await this.loadOfflineMessages(option, offlineMessages);\r\n\r\n                // Sort the conversations, the offline messages could affect the order.\r\n                option.conversations = AddonMessages.sortConversations(option.conversations);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Fetch conversation counts.\r\n     *\r\n     * @return Promise resolved when done.\r\n     */\r\n    protected async fetchConversationCounts(): Promise<void> {\r\n        // Always try to get the latest data.\r\n        await AddonMessages.invalidateConversationCounts(this.siteId);\r\n\r\n        const counts = await AddonMessages.getConversationCounts(this.siteId);\r\n        this.favourites.count = counts.favourites;\r\n        this.individual.count = counts.individual + counts.self; // Self is only returned if it's not favourite.\r\n        this.group.count = counts.group;\r\n    }\r\n\r\n    /**\r\n     * Find a conversation in the list of loaded conversations.\r\n     *\r\n     * @param conversationId The conversation ID to search.\r\n     * @param userId User ID to search (if no conversationId).\r\n     * @param option The option to search in. If not defined, search in all options.\r\n     * @return Conversation.\r\n     */\r\n    protected findConversation(\r\n        conversationId?: number,\r\n        userId?: number,\r\n        option?: AddonMessagesGroupConversationOption,\r\n    ): AddonMessagesConversationForList | undefined {\r\n\r\n        if (conversationId) {\r\n            const conversations: AddonMessagesConversationForList[] = option\r\n                ? option.conversations\r\n                : (this.favourites.conversations.concat(this.group.conversations).concat(this.individual.conversations));\r\n\r\n            return conversations.find((conv) => conv.id == conversationId);\r\n        }\r\n\r\n        const conversations = option\r\n            ? option.conversations\r\n            : this.favourites.conversations.concat(this.individual.conversations);\r\n\r\n        return conversations.find((conv) => conv.userid == userId);\r\n    }\r\n\r\n    /**\r\n     * Get the option that is currently expanded, undefined if they are all collapsed.\r\n     *\r\n     * @return Option currently expanded.\r\n     */\r\n    protected getExpandedOption(): AddonMessagesGroupConversationOption | undefined {\r\n        if (this.favourites.expanded) {\r\n            return this.favourites;\r\n        } else if (this.group.expanded) {\r\n            return this.group;\r\n        } else if (this.individual.expanded) {\r\n            return this.individual;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Navigate to contacts view.\r\n     */\r\n    gotoContacts(): void {\r\n        CoreNavigator.navigateToSitePath('contacts');\r\n    }\r\n\r\n    /**\r\n     * Navigate to a particular conversation.\r\n     *\r\n     * @param conversationId Conversation Id to load.\r\n     * @param userId User of the conversation. Only if there is no conversationId.\r\n     * @param messageId Message to scroll after loading the discussion. Used when searching.\r\n     */\r\n    gotoConversation(conversationId?: number, userId?: number, messageId?: number): void {\r\n        this.selectedConversationId = conversationId;\r\n        this.selectedUserId = userId;\r\n\r\n        const params: Params = {};\r\n        if (conversationId) {\r\n            params.conversationId = conversationId;\r\n        }\r\n        if (userId) {\r\n            params.userId = userId;\r\n        }\r\n        if (messageId) {\r\n            params.message = messageId;\r\n        }\r\n\r\n        const splitViewLoaded = CoreNavigator.isCurrentPathInTablet('**/messages/group-conversations/discussion');\r\n        const path = (splitViewLoaded ? '../' : '') + 'discussion';\r\n        CoreNavigator.navigate(path, { params });\r\n    }\r\n\r\n    /**\r\n     * Navigate to message settings.\r\n     */\r\n    gotoSettings(): void {\r\n        CoreNavigator.navigateToSitePath('../preferences');\r\n    }\r\n\r\n    /**\r\n     * Function to load more conversations.\r\n     *\r\n     * @param option The option to fetch data for.\r\n     * @param infiniteComplete Infinite scroll complete function. Only used from core-infinite-loading.\r\n     * @return Promise resolved when done.\r\n     */\r\n    async loadMoreConversations(option: AddonMessagesGroupConversationOption, infiniteComplete?: () => void): Promise<void> {\r\n        try {\r\n            await this.fetchDataForOption(option, true);\r\n        } catch (error) {\r\n            CoreDomUtils.showErrorModalDefault(error, 'addon.messages.errorwhileretrievingdiscussions', true);\r\n            option.loadMoreError = true;\r\n        }\r\n\r\n        infiniteComplete && infiniteComplete();\r\n    }\r\n\r\n    /**\r\n     * Load offline messages into the conversations.\r\n     *\r\n     * @param option The option where the messages should be loaded.\r\n     * @param messages Offline messages.\r\n     * @return Promise resolved when done.\r\n     */\r\n    protected async loadOfflineMessages(\r\n        option: AddonMessagesGroupConversationOption,\r\n        messages: AddonMessagesOfflineAnyMessagesFormatted[],\r\n    ): Promise<void> {\r\n        const promises: Promise<void>[] = [];\r\n\r\n        messages.forEach((message) => {\r\n            if ('conversationid' in message) {\r\n                // It's an existing conversation. Search it in the current option.\r\n                let conversation = this.findConversation(message.conversationid, undefined, option);\r\n\r\n                if (conversation) {\r\n                    // Check if it's the last message. Offline messages are considered more recent than sent messages.\r\n                    if (typeof conversation.lastmessage === 'undefined' || conversation.lastmessage === null ||\r\n                            !conversation.lastmessagepending || (conversation.lastmessagedate || 0) <= message.timecreated / 1000) {\r\n\r\n                        this.addLastOfflineMessage(conversation, message);\r\n                    }\r\n                } else {\r\n                    // Conversation not found, it could be an old one or the message could belong to another option.\r\n                    conversation = {\r\n                        id: message.conversationid,\r\n                        type: message.conversation?.type || AddonMessagesProvider.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL,\r\n                        membercount: message.conversation?.membercount || 0,\r\n                        ismuted: message.conversation?.ismuted || false,\r\n                        isfavourite: message.conversation?.isfavourite || false,\r\n                        isread: message.conversation?.isread || false,\r\n                        members: message.conversation?.members || [],\r\n                        messages: message.conversation?.messages || [],\r\n                        candeletemessagesforallusers: message.conversation?.candeletemessagesforallusers || false,\r\n                        userid: 0, // Faked data.\r\n                        name: message.conversation?.name,\r\n                        imageurl: message.conversation?.imageurl || '',\r\n                    };\r\n\r\n                    if (this.getConversationOption(conversation) == option) {\r\n                        // Message belongs to current option, add the conversation.\r\n                        this.addLastOfflineMessage(conversation, message);\r\n                        this.addOfflineConversation(conversation);\r\n                    }\r\n                }\r\n            } else if (option.type == AddonMessagesProvider.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL) {\r\n                // It's a new conversation. Check if we already created it (there is more than one message for the same user).\r\n                const conversation = this.findConversation(undefined, message.touserid, option);\r\n\r\n                message.text = message.smallmessage;\r\n\r\n                if (conversation) {\r\n                    // Check if it's the last message. Offline messages are considered more recent than sent messages.\r\n                    if ((conversation.lastmessagedate || 0) <= message.timecreated / 1000) {\r\n                        this.addLastOfflineMessage(conversation, message);\r\n                    }\r\n                } else {\r\n                    // Get the user data and create a new conversation if it belongs to the current option.\r\n                    promises.push(CoreUser.getProfile(message.touserid, undefined, true).catch(() => {\r\n                        // User not found.\r\n                    }).then((user) => {\r\n                        const conversation: AddonMessagesConversationForList = {\r\n                            id: 0,\r\n                            type: AddonMessagesProvider.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL,\r\n                            membercount: 0, // Faked data.\r\n                            ismuted: false, // Faked data.\r\n                            isfavourite: false, // Faked data.\r\n                            isread: false, // Faked data.\r\n                            members: [], // Faked data.\r\n                            messages: [], // Faked data.\r\n                            candeletemessagesforallusers: false,\r\n                            userid: message.touserid,\r\n                            name: user ? user.fullname : String(message.touserid),\r\n                            imageurl: user ? user.profileimageurl : '',\r\n                        };\r\n\r\n                        this.addLastOfflineMessage(conversation, message);\r\n                        this.addOfflineConversation(conversation);\r\n\r\n                        return;\r\n                    }));\r\n                }\r\n            }\r\n        });\r\n\r\n        await Promise.all(promises);\r\n    }\r\n\r\n    /**\r\n     * Add an offline conversation into the right list of conversations.\r\n     *\r\n     * @param conversation Offline conversation to add.\r\n     */\r\n    protected addOfflineConversation(conversation: AddonMessagesConversationForList): void {\r\n        const option = this.getConversationOption(conversation);\r\n        option.conversations.unshift(conversation);\r\n    }\r\n\r\n    /**\r\n     * Add a last offline message into a conversation.\r\n     *\r\n     * @param conversation Conversation where to put the last message.\r\n     * @param message Offline message to add.\r\n     */\r\n    protected addLastOfflineMessage(\r\n        conversation: AddonMessagesConversationForList,\r\n        message: AddonMessagesOfflineAnyMessagesFormatted,\r\n    ): void {\r\n        conversation.lastmessage = message.text;\r\n        conversation.lastmessagedate = message.timecreated / 1000;\r\n        conversation.lastmessagepending = true;\r\n        conversation.sentfromcurrentuser = true;\r\n    }\r\n\r\n    /**\r\n     * Given a conversation, return its option (favourites, group, individual).\r\n     *\r\n     * @param conversation Conversation to check.\r\n     * @return Option object.\r\n     */\r\n    protected getConversationOption(\r\n        conversation: AddonMessagesConversationForList | AddonMessagesNewMessagedEventData,\r\n    ): AddonMessagesGroupConversationOption {\r\n        if (conversation.isfavourite) {\r\n            return this.favourites;\r\n        }\r\n\r\n        if (conversation.type == AddonMessagesProvider.MESSAGE_CONVERSATION_TYPE_GROUP) {\r\n            return this.group;\r\n        }\r\n\r\n        return this.individual;\r\n    }\r\n\r\n    /**\r\n     * Refresh the data.\r\n     *\r\n     * @param refresher Refresher.\r\n     * @param refreshUnreadCounts Whether to refresh unread counts.\r\n     * @return Promise resolved when done.\r\n     */\r\n    async refreshData(refresher?: IonRefresher, refreshUnreadCounts: boolean = true): Promise<void> {\r\n        // Don't invalidate conversations and so, they always try to get latest data.\r\n        try {\r\n            await AddonMessages.invalidateContactRequestsCountCache(this.siteId);\r\n        } finally {\r\n            try {\r\n                await this.fetchData(refreshUnreadCounts);\r\n            } finally {\r\n                if (refresher) {\r\n                    refresher?.complete();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toogle the visibility of an option (expand/collapse).\r\n     *\r\n     * @param option The option to expand/collapse.\r\n     */\r\n    toggle(option: AddonMessagesGroupConversationOption): void {\r\n        if (option.expanded) {\r\n            // Already expanded, close it.\r\n            option.expanded = false;\r\n            this.loadCurrentListElement();\r\n        } else {\r\n            // Pass getCounts=true to update the counts everytime the user expands an option.\r\n            this.expandOption(option, true).catch((error) => {\r\n                CoreDomUtils.showErrorModalDefault(error, 'addon.messages.errorwhileretrievingdiscussions', true);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Expand a certain option.\r\n     *\r\n     * @param option The option to expand.\r\n     * @param getCounts Whether to get counts data.\r\n     * @return Promise resolved when done.\r\n     */\r\n    protected async expandOption(option: AddonMessagesGroupConversationOption, getCounts = false): Promise<void> {\r\n        // Collapse all and expand the right one.\r\n        this.favourites.expanded = false;\r\n        this.group.expanded = false;\r\n        this.individual.expanded = false;\r\n\r\n        option.expanded = true;\r\n        option.loading = true;\r\n\r\n        try {\r\n            await this.fetchDataForOption(option, false, getCounts);\r\n\r\n            this.loadCurrentListElement();\r\n        } catch (error) {\r\n            option.expanded = false;\r\n\r\n            throw error;\r\n        } finally {\r\n            option.loading = false;\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Load the current list element based on the expanded list.\r\n     */\r\n    protected loadCurrentListElement(): void {\r\n        if (this.favourites.expanded) {\r\n            this.currentListEl = this.favListEl && this.favListEl.nativeElement;\r\n        } else if (this.group.expanded) {\r\n            this.currentListEl = this.groupListEl && this.groupListEl.nativeElement;\r\n        } else if (this.individual.expanded) {\r\n            this.currentListEl = this.indListEl && this.indListEl.nativeElement;\r\n        } else {\r\n            this.currentListEl = undefined;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Navigate to the search page.\r\n     */\r\n    gotoSearch(): void {\r\n        CoreNavigator.navigateToSitePath('search');\r\n    }\r\n\r\n    /**\r\n     * Page destroyed.\r\n     */\r\n    ngOnDestroy(): void {\r\n        this.newMessagesObserver?.off();\r\n        this.appResumeSubscription?.unsubscribe();\r\n        this.pushObserver?.unsubscribe();\r\n        this.readChangedObserver?.off();\r\n        this.cronObserver?.off();\r\n        this.openConversationObserver?.off();\r\n        this.updateConversationListObserver?.off();\r\n        this.contactRequestsCountObserver?.off();\r\n        this.memberInfoObserver?.off();\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Conversation options.\r\n */\r\nexport type AddonMessagesGroupConversationOption = {\r\n    type?: number; // Option type.\r\n    favourites: boolean; // Whether it contains favourites conversations.\r\n    count: number; // Number of conversations.\r\n    unread?: number; // Number of unread conversations.\r\n    expanded?: boolean; // Whether the option is currently expanded.\r\n    loading?: boolean; // Whether the option is being loaded.\r\n    canLoadMore?: boolean; // Whether it can load more data.\r\n    loadMoreError?: boolean; // Whether there was an error loading more conversations.\r\n    conversations: AddonMessagesConversationForList[]; // List of conversations.\r\n};\r\n\r\n/**\r\n * Formatted conversation with some calculated data for the list.\r\n */\r\nexport type AddonMessagesConversationForList = AddonMessagesConversationFormatted & {\r\n    lastmessagepending?: boolean; // Calculated in the app. Whether last message is pending to be sent.\r\n};\r\n"],"sourceRoot":"webpack:///"}